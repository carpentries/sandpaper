<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Build a page for aggregating common elements — build_aio • sandpaper</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Build a page for aggregating common elements — build_aio"><meta name="description" content="Build a page for aggregating common elements"><meta property="og:description" content="Build a page for aggregating common elements"><meta property="og:image" content="https://carpentries.github.io/sandpaper/logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@zkamvar"><meta name="twitter:site" content="@thecarpentries"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sandpaper</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.17.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/building-with-renv.html">Building Lessons With A Package Cache</a></li>
    <li><a class="dropdown-item" href="../articles/automated-pull-requests.html">Working with Automated Pull Requests</a></li>
    <li><a class="dropdown-item" href="../articles/include-child-documents.html">Including Child Documents</a></li>
    <li><a class="dropdown-item" href="../articles/translations.html">Translating The Workbench</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/carpentries/sandpaper/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Build a page for aggregating common elements</h1>
      <small class="dont-index">Source: <a href="https://github.com/carpentries/sandpaper/blob/0.17.1/R/build_aio.R" class="external-link"><code>R/build_aio.R</code></a>, <a href="https://github.com/carpentries/sandpaper/blob/0.17.1/R/build_images.R" class="external-link"><code>R/build_images.R</code></a>, <a href="https://github.com/carpentries/sandpaper/blob/0.17.1/R/build_instructor_notes.R" class="external-link"><code>R/build_instructor_notes.R</code></a>, and 2 more</small>
      <div class="d-none name"><code>build_agg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Build a page for aggregating common elements</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">build_aio</span><span class="op">(</span><span class="va">pkg</span>, pages <span class="op">=</span> <span class="cn">NULL</span>, quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">build_images</span><span class="op">(</span><span class="va">pkg</span>, pages <span class="op">=</span> <span class="cn">NULL</span>, quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">build_instructor_notes</span><span class="op">(</span><span class="va">pkg</span>, pages <span class="op">=</span> <span class="cn">NULL</span>, built <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">quiet</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">build_keypoints</span><span class="op">(</span><span class="va">pkg</span>, pages <span class="op">=</span> <span class="cn">NULL</span>, quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">build_agg_page</span><span class="op">(</span></span>
<span>  <span class="va">pkg</span>,</span>
<span>  <span class="va">pages</span>,</span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  slug <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  aggregate <span class="op">=</span> <span class="st">"section"</span>,</span>
<span>  append <span class="op">=</span> <span class="st">"self::node()"</span>,</span>
<span>  prefix <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-pkg">pkg<a class="anchor" aria-label="anchor" href="#arg-pkg"></a></dt>
<dd><p>an object created via <code><a href="https://pkgdown.r-lib.org/reference/as_pkgdown.html" class="external-link">pkgdown::as_pkgdown()</a></code> of a lesson.</p></dd>


<dt id="arg-pages">pages<a class="anchor" aria-label="anchor" href="#arg-pages"></a></dt>
<dd><p>output from the function <code><a href="read_all_html.html">read_all_html()</a></code>: a nested list of
<code>xml_document</code> objects representing episodes in the lesson</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>if <code>TRUE</code>, no messages will be emitted. If FALSE, pkgdown will
report creation of the temporary file.</p></dd>


<dt id="arg-built">built<a class="anchor" aria-label="anchor" href="#arg-built"></a></dt>
<dd><p>a vector of markdown documents that have recently been rebuilt
(for future use)</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>the new page title</p></dd>


<dt id="arg-slug">slug<a class="anchor" aria-label="anchor" href="#arg-slug"></a></dt>
<dd><p>the slug for the page (e.g. "aio" will become "aio.html")</p></dd>


<dt id="arg-aggregate">aggregate<a class="anchor" aria-label="anchor" href="#arg-aggregate"></a></dt>
<dd><p>a selector for the lesson content you want to aggregate.
The default is "section", which will aggregate all sections, but nothing
outside of the sections. To grab everything in the page, use "*"</p></dd>


<dt id="arg-append">append<a class="anchor" aria-label="anchor" href="#arg-append"></a></dt>
<dd><p>a selector for the section of the page where the aggregate data
should be placed. This defaults to "self::node()", which indicates that the
entire page should be appended.</p></dd>


<dt id="arg-prefix">prefix<a class="anchor" aria-label="anchor" href="#arg-prefix"></a></dt>
<dd><p>flag to add a prefix for the aggregated sections. Defaults to
<code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>NULL, invisibly. This is called for its side-effect</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Building an aggregate page is very much akin to copy/paste—you take the
same elements across several pages and paste them into one large page. We can
do this programmatically by using XPath to extract nodes from pages and add
them into the document.</p>
<p>To customise the page, we need a few things:</p><ol><li><p>a title</p></li>
<li><p>a slug</p></li>
<li><p>a method to prepare and insert the extracted content (e.g. <code><a href="make_aio_section.html">make_aio_section()</a></code>)</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This function assumes that you have already built all the episodes of your
lesson.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co"># build_aio() assumes that your lesson has been built and takes in a</span></span></span>
<span class="r-in"><span>  <span class="co"># pkgdown object, which can be created from the `site/` folder in your</span></span></span>
<span class="r-in"><span>  <span class="co"># lesson.</span></span></span>
<span class="r-in"><span>  <span class="va">lsn</span> <span class="op">&lt;-</span> <span class="st">"/path/to/my/lesson"</span></span></span>
<span class="r-in"><span>  <span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/as_pkgdown.html" class="external-link">as_pkgdown</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">lsn</span>, <span class="st">"site"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">htmls</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_all_html.html">read_all_html</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">$</span><span class="va">dst_path</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">build_aio</span><span class="op">(</span><span class="va">pkg</span>, <span class="va">htmls</span>, quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">build_keypoints</span><span class="op">(</span><span class="va">pkg</span>, <span class="va">htmls</span>, quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Davey, Erin Becker, Zhian N. Kamvar, Joel H. Nitta.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

