<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Setup a git worktree for concurrent manipulation of a separate branch"><title>Setup a git worktree for concurrent manipulation of a separate branch — git_worktree_setup • sandpaper</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Setup a git worktree for concurrent manipulation of a separate branch — git_worktree_setup"><meta property="og:description" content="Setup a git worktree for concurrent manipulation of a separate branch"><meta property="og:image" content="https://carpentries.github.io/sandpaper/logo.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@zkamvar"><meta name="twitter:site" content="@thecarpentries"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sandpaper</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.11.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/building-with-renv.html">Building Lessons With A Package Cache</a>
    <a class="dropdown-item" href="../articles/automated-pull-requests.html">Working with Automated Pull Requests</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/carpentries/sandpaper/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Setup a git worktree for concurrent manipulation of a separate branch</h1>
      <small class="dont-index">Source: <a href="https://github.com/carpentries/sandpaper/blob/HEAD/R/utils-git.R" class="external-link"><code>R/utils-git.R</code></a></small>
      <div class="d-none name"><code>git_worktree.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Setup a git worktree for concurrent manipulation of a separate branch</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">git_worktree_setup</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  <span class="va">dest_dir</span>,</span>
<span>  branch <span class="op">=</span> <span class="st">"gh-pages"</span>,</span>
<span>  remote <span class="op">=</span> <span class="st">"origin"</span>,</span>
<span>  throwaway <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">github_worktree_commit</span><span class="op">(</span><span class="va">dir</span>, <span class="va">commit_message</span>, <span class="va">remote</span>, <span class="va">branch</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">github_worktree_remove</span><span class="op">(</span><span class="va">dir</span>, home <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>path</dt>
<dd><p>path to the repository</p></dd>


<dt>dest_dir</dt>
<dd><p>path to the destination directory to contain the work tree</p></dd>


<dt>branch</dt>
<dd><p>the branch associated with the work tree (default: gh-pages)</p></dd>


<dt>remote</dt>
<dd><p>the remote name (default: origin)</p></dd>


<dt>throwaway</dt>
<dd><p>if <code>TRUE</code>, the worktree created is in a detached HEAD state
from from the remote branch and will not create a new branch in your
repository. Defaults to <code>FALSE</code>, which will create the branch from upstream.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>an <code><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression()</a></code> that calls <code>git worktree remove</code> on the worktree
when evaluated.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is used in continuous integration settings where we want to
push derived outputs to non-main branches in our repository. We use this to
populate the markdown and HTML outputs from the lesson so that we don't have
to rebuild the lesson from scratch every time.</p>
<p>The logic behind this looks like</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>worktree setup</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>[IF BRANCH DOES NOT EXIST]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  git checkout <span class="sc">--</span>orphan <span class="sc">&lt;</span>branch<span class="sc">&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  git rm <span class="sc">-</span>rf <span class="sc">--</span>quiet .</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  git commit <span class="sc">--</span>allow<span class="sc">-</span>empty <span class="sc">-</span>m</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  git push remote HEAD<span class="sc">:</span><span class="er">&lt;</span>branch<span class="sc">&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  git checkout <span class="sc">-</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>git fetch <span class="sc">&lt;</span>remote<span class="sc">&gt;</span> <span class="sc">+</span>refs<span class="sc">/</span>heads<span class="sc">/</span><span class="er">&lt;</span>branch<span class="sc">&gt;</span><span class="er">:</span>refs<span class="sc">/</span>remotes<span class="sc">/</span><span class="er">&lt;</span>remote<span class="sc">&gt;</span><span class="er">/&lt;</span>branch<span class="sc">&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>git worktree add <span class="sc">--</span>track <span class="sc">-</span>B <span class="sc">&lt;</span>branch<span class="sc">&gt;</span> <span class="er">/</span>path<span class="sc">/</span>to<span class="sc">/</span>dir <span class="sc">&lt;</span>remote<span class="sc">&gt;</span><span class="er">/&lt;</span>branch<span class="sc">&gt;</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p><code>git_worktree_setup()</code> has been modified from the logic in
<code><a href="https://pkgdown.r-lib.org/reference/deploy_to_branch.html" class="external-link">pkgdown::deploy_to_branch()</a></code>, by Hadley Wickham.</p>
<p><code>github_worktree_commit()</code>: Modified from <code>pkgdown:::github_push</code> by Hadley
Wickham</p>
<p><code>github_worktree_remove()</code>: Modified from <code>pkgdown:::github_worktree_remove</code>
by Hadley Wickham</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Use Worktrees to deploy a lesson -----------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># This example is a bit inovlved, but it is effectively what we do inside of</span></span></span>
<span class="r-in"><span><span class="co"># the `ci_deploy()` function (after setting up the lesson).</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># The setup phase will create a new lesson and a corresponding remote (self</span></span></span>
<span class="r-in"><span><span class="co"># contained, no GitHub authentication required).</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># The worktrees will be created for both the markdown and HTML outputs on the</span></span></span>
<span class="r-in"><span><span class="co"># branches "md-outputs" and "gh-pages", respectively.</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># After the worktrees are created, we will build the lesson into the</span></span></span>
<span class="r-in"><span><span class="co"># worktrees and display the output of `git_status()` for each of the three</span></span></span>
<span class="r-in"><span><span class="co"># branches: "main", "md-outputs", and "gh-pages"</span></span></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># During the clean up phase, the output of `git_worktree_setup()` is</span></span></span>
<span class="r-in"><span><span class="co"># evaluated</span></span></span>
<span class="r-in"><span><span class="va">tik</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_h1.html" class="external-link">cli_h1</a></span><span class="op">(</span><span class="st">"Set up"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Set up</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────────────────</span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_h1.html" class="external-link">cli_h2</a></span><span class="op">(</span><span class="st">"Create Lesson"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Create Lesson</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">restore_fixture</span> <span class="op">&lt;-</span> <span class="fu">sandpaper</span><span class="fu">:::</span><span class="fu"><a href="fixtures.html">create_test_lesson</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> → Bootstrapping example lesson</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">→ Searching for and installing available dependencies</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Discovering package dependencies ... Done!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">The following packages were discovered:</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # ~/work/_temp/Library ===============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - R6          2.5.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - base64enc   0.1-3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - bslib       0.4.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - cachem      1.0.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - cli         3.6.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - digest      0.6.31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - ellipsis    0.3.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - evaluate    0.20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - fastmap     1.1.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - fs          1.6.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - glue        1.6.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - highr       0.10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - htmltools   0.5.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - jquerylib   0.1.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - jsonlite    1.8.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - knitr       1.42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - lifecycle   1.0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - magrittr    2.0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - memoise     2.0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - mime        0.12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - rappdirs    0.3.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - rlang       1.0.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - rmarkdown   2.20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - sass        0.4.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - stringi     1.7.12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - stringr     1.5.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - tinytex     0.44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - vctrs       0.5.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - xfun        0.37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - yaml        2.3.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> They will be copied into the project library.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Copying packages into the project library ... Done!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Hydrated 30 packages in 0.21 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">→ Recording changes in lockfile</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">The following package(s) will be updated in the lockfile:</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # GitHub =============================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - renv        [* -&gt; rstudio/renv@HEAD]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # RSPM ===============================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - R6          [* -&gt; 2.5.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - base64enc   [* -&gt; 0.1-3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - bslib       [* -&gt; 0.4.2]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - cachem      [* -&gt; 1.0.7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - cli         [* -&gt; 3.6.0]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - digest      [* -&gt; 0.6.31]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - ellipsis    [* -&gt; 0.3.2]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - evaluate    [* -&gt; 0.20]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - fastmap     [* -&gt; 1.1.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - fs          [* -&gt; 1.6.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - glue        [* -&gt; 1.6.2]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - highr       [* -&gt; 0.10]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - htmltools   [* -&gt; 0.5.4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - jquerylib   [* -&gt; 0.1.4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - jsonlite    [* -&gt; 1.8.4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - knitr       [* -&gt; 1.42]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - lifecycle   [* -&gt; 1.0.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - magrittr    [* -&gt; 2.0.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - memoise     [* -&gt; 2.0.1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - mime        [* -&gt; 0.12]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - rappdirs    [* -&gt; 0.3.3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - rlang       [* -&gt; 1.0.6]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - rmarkdown   [* -&gt; 2.20]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - sass        [* -&gt; 0.4.5]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - stringi     [* -&gt; 1.7.12]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - stringr     [* -&gt; 1.5.0]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - tinytex     [* -&gt; 0.44]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - vctrs       [* -&gt; 0.5.2]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - xfun        [* -&gt; 0.37]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - yaml        [* -&gt; 2.3.7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The version of R recorded in the lockfile will be updated:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - R           [* -&gt; 4.2.2]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Lockfile written to '/tmp/RtmphQGbTg/file17067e477a54/lesson-example/renv/profiles/lesson-requirements/renv.lock'.</span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"sandpaper.test_fixture"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sandpaper</span><span class="fu">:::</span><span class="fu">check_git_user</span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_h1.html" class="external-link">cli_h2</a></span><span class="op">(</span><span class="st">"Create Remote"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Create Remote</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">rmt</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/file_temp.html" class="external-link">file_temp</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"REMOTE-"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sandpaper</span><span class="fu">:::</span><span class="fu"><a href="fixtures.html">setup_local_remote</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="va">res</span>, remote <span class="op">=</span> <span class="va">rmt</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tok</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_info</a></span><span class="op">(</span><span class="st">"Elapsed time: {round(tok - tik, 2)} seconds"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Elapsed time: 3.05 seconds</span>
<span class="r-in"><span><span class="va">tik</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_h1.html" class="external-link">cli_h2</a></span><span class="op">(</span><span class="st">"Create Worktrees"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">Create Worktrees</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu">sandpaper</span><span class="fu">:::</span><span class="fu">git_worktree_setup</span><span class="op">(</span><span class="va">res</span>, <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"site"</span>, <span class="st">"built"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  branch <span class="op">=</span> <span class="st">"md-outputs"</span>, remote <span class="op">=</span> <span class="st">"sandpaper-local"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::group::Create New Branch</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git checkout --orphan md-outputs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">Switched to a new branch 'md-outputs'</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git rm -rf --quiet .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git commit --allow-empty -m 'Initializing md-outputs branch'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [md-outputs (root-commit) 389e969] Initializing md-outputs branch</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git push sandpaper-local 'HEAD:md-outputs'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">To /tmp/RtmphQGbTg/REMOTE-17066169b822</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;"> * [new branch]      HEAD -&gt; md-outputs</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git checkout main</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Your branch is up to date with 'sandpaper-local/main'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">Switched to branch 'main'</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::endgroup::</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::group::Fetch sandpaper-local/md-outputs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git remote set-branches sandpaper-local md-outputs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git fetch sandpaper-local md-outputs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">From /tmp/RtmphQGbTg/REMOTE-17066169b822</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;"> * branch            md-outputs -&gt; FETCH_HEAD</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git remote set-branches sandpaper-local '*'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::endgroup::</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::group::Add worktree for sandpaper-local/md-outputs in site/built</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git worktree add --track -B md-outputs \</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   /tmp/RtmphQGbTg/file17067e477a54/lesson-example/site/built \</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sandpaper-local/md-outputs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">Preparing worktree (resetting branch 'md-outputs'; was at 389e969)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> branch 'md-outputs' set up to track 'sandpaper-local/md-outputs'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HEAD is now at 389e969 Initializing md-outputs branch</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::endgroup::</span>
<span class="r-in"><span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu">sandpaper</span><span class="fu">:::</span><span class="fu">git_worktree_setup</span><span class="op">(</span><span class="va">res</span>, <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"site"</span>, <span class="st">"docs"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  branch <span class="op">=</span> <span class="st">"gh-pages"</span>, remote <span class="op">=</span> <span class="st">"sandpaper-local"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::group::Create New Branch</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git checkout --orphan gh-pages</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">Switched to a new branch 'gh-pages'</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git rm -rf --quiet .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git commit --allow-empty -m 'Initializing gh-pages branch'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [gh-pages (root-commit) e909926] Initializing gh-pages branch</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git push sandpaper-local 'HEAD:gh-pages'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">To /tmp/RtmphQGbTg/REMOTE-17066169b822</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;"> * [new branch]      HEAD -&gt; gh-pages</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git checkout main</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Your branch is up to date with 'sandpaper-local/main'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">Switched to branch 'main'</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::endgroup::</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::group::Fetch sandpaper-local/gh-pages</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git remote set-branches sandpaper-local gh-pages</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git fetch sandpaper-local gh-pages</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">From /tmp/RtmphQGbTg/REMOTE-17066169b822</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;"> * branch            gh-pages   -&gt; FETCH_HEAD</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git remote set-branches sandpaper-local '*'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::endgroup::</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::group::Add worktree for sandpaper-local/gh-pages in site/docs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git worktree add --track -B gh-pages \</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   /tmp/RtmphQGbTg/file17067e477a54/lesson-example/site/docs \</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sandpaper-local/gh-pages</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">Preparing worktree (resetting branch 'gh-pages'; was at e909926)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> branch 'gh-pages' set up to track 'sandpaper-local/gh-pages'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> HEAD is now at e909926 Initializing gh-pages branch</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ::endgroup::</span>
<span class="r-in"><span><span class="va">tok</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_info</a></span><span class="op">(</span><span class="st">"Elapsed time: {round(tok - tik, 2)} seconds"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Elapsed time: 0.31 seconds</span>
<span class="r-in"><span><span class="va">tik</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_h1.html" class="external-link">cli_h1</a></span><span class="op">(</span><span class="st">"Build Lesson into worktrees"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Build Lesson into worktrees</span> <span style="color: #00BBBB;">─────────────────────────────────────────</span></span>
<span class="r-in"><span><span class="fu"><a href="build_lesson.html">build_lesson</a></span><span class="op">(</span><span class="va">res</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span>, preview <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_h1.html" class="external-link">cli_h2</a></span><span class="op">(</span><span class="st">"git status: {gert::git_branch(repo = res)}"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">git status: main</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">gert</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_commit.html" class="external-link">git_status</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="va">res</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 0 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 3 variables: file &lt;chr&gt;, status &lt;chr&gt;, staged &lt;lgl&gt;</span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_h1.html" class="external-link">cli_h2</a></span><span class="op">(</span><span class="st">'git status: {gert::git_branch(repo = fs::path(res, "site", "built"))}'</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">git status: md-outputs</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">gert</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_commit.html" class="external-link">git_status</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"site"</span>, <span class="st">"built"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 12 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    file                status staged</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> CODE_OF_CONDUCT.md  new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> LICENSE.md          new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> config.yaml         new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> fig/                new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> index.md            new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> instructor-notes.md new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> introduction.md     new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> learner-profiles.md new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> links.md            new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> md5sum.txt          new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> renv.lock           new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> setup.md            new    FALSE </span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_h1.html" class="external-link">cli_h2</a></span><span class="op">(</span><span class="st">'git status: {gert::git_branch(repo = fs::path(res, "site", "docs"))}'</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">git status: gh-pages</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">gert</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_commit.html" class="external-link">git_status</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">res</span>, <span class="st">"site"</span>, <span class="st">"docs"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 34 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    file                       status staged</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> .nojekyll                  new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> CODE_OF_CONDUCT.html       new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> LICENSE.html               new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> aio.html                   new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> android-chrome-192x192.png new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> android-chrome-512x512.png new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> apple-touch-icon.png       new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> assets/                    new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> bootstrap-toc.css          new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> bootstrap-toc.js           new    FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 24 more rows</span></span>
<span class="r-in"><span><span class="va">tok</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_info</a></span><span class="op">(</span><span class="st">"Elapsed time: {round(tok - tik, 2)} seconds"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Elapsed time: 9.36 seconds</span>
<span class="r-in"><span><span class="va">tik</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_h1.html" class="external-link">cli_h1</a></span><span class="op">(</span><span class="st">"Clean Up"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Clean Up</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────</span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_info</a></span><span class="op">(</span><span class="st">"object db is an expression that evaluates to {.code {db}}"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> object db is an expression that evaluates to `sandpaper:::github_worktree_remove("/tmp/RtmphQGbTg/file17067e477a54/lesson-example/site/built", "/tmp/RtmphQGbTg/file17067e477a54/lesson-example")`</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git worktree remove --force \</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   /tmp/RtmphQGbTg/file17067e477a54/lesson-example/site/built</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $status</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $stdout</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $stderr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $timeout</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_info</a></span><span class="op">(</span><span class="st">"object ds is an expression that evaluates to {.code {ds}}"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> object ds is an expression that evaluates to `sandpaper:::github_worktree_remove("/tmp/RtmphQGbTg/file17067e477a54/lesson-example/site/docs", "/tmp/RtmphQGbTg/file17067e477a54/lesson-example")`</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running git worktree remove --force \</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   /tmp/RtmphQGbTg/file17067e477a54/lesson-example/site/docs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $status</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $stdout</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $stderr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $timeout</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">sandpaper</span><span class="fu">:::</span><span class="fu"><a href="fixtures.html">remove_local_remote</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="va">res</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> /tmp/RtmphQGbTg/REMOTE-17066169b822</span>
<span class="r-in"><span><span class="fu">sandpaper</span><span class="fu">:::</span><span class="fu">reset_git_user</span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># remove the test fixture and report</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/delete.html" class="external-link">dir_delete</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>, error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tok</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_info</a></span><span class="op">(</span><span class="st">"Elapsed time: {round(tok - tik, 2)} seconds"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Elapsed time: 0.12 seconds</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Zhian N. Kamvar.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

