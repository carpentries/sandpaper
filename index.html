<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Create, Preview, and Maintain Carpentries-Style Lessons">
<title>The Carpentries Lesson Infrastructure Engine • sandpaper</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="The Carpentries Lesson Infrastructure Engine">
<meta property="og:description" content="Create, Preview, and Maintain Carpentries-Style Lessons">
<meta property="og:image" content="https://carpentries.github.io/sandpaper/logo.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@zkamvar">
<meta name="twitter:site" content="@thecarpentries">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">sandpaper</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/building-with-renv.html">Building Lessons With A Package Cache</a>
    <a class="dropdown-item" href="articles/automated-pull-requests.html">Working with Automated Pull Requests</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/carpentries/sandpaper/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="sandpaper-user-interface-to-the-carpentries-workbench-">{sandpaper}: User Interface to The Carpentries Workbench <a class="anchor" aria-label="anchor" href="#sandpaper-user-interface-to-the-carpentries-workbench-"></a>
</h1>
</div>
<!-- README.md is generated from README.Rmd. Please edit that file --><!-- badges: start -->
<p>The {sandpaper} package was created by <a href="https://carpentries.org" class="external-link">The Carpentries</a> to re-imagine our method of creating lesson websites for our workshops. This package will take a series of <a href="https://www.markdownguide.org/getting-started/" class="external-link">Markdown</a> or <a href="https://rmarkdown.rstudio.com/" class="external-link">RMarkdown</a> files and generate a static website with the features and styling of The Carpentries lessons including customized layouts and callout blocks. Much of the functionality in this package is inspired by <a href="https://jennybryan.org/" class="external-link">Jenny Bryan’s</a> work with the <a href="https://usethis.r-lib.org/" class="external-link">{usethis}</a> package.</p>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p><strong>Want to know how this works in a lesson format? Head over to <a href="https://carpentries.github.io/sandpaper-docs/" class="uri">https://carpentries.github.io/sandpaper-docs/</a>.</strong></p>
<p>If, instead, you already know how a lesson is built and are interested in understanding how the functions in {sandpaper} work, you can visit this package documentation site at <a href="https://carpentries.github.io/sandpaper/" class="uri">https://carpentries.github.io/sandpaper/</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>{sandpaper} is not currently on CRAN, but it can be installed from our <a href="https://carpentries.r-universe.dev/ui#builds" class="external-link">Carpentries Universe</a> (updated every hour) with the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  carpentries <span class="op">=</span> <span class="st">"https://carpentries.r-universe.dev/"</span>, </span>
<span>  CRAN <span class="op">=</span> <span class="st">"https://cran.rstudio.com/"</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"sandpaper"</span>, dep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Note that this will also install development versions of the following packages:</p>
<table class="table">
<colgroup>
<col width="43%">
<col width="56%">
</colgroup>
<thead><tr class="header">
<th>package</th>
<th>What it does</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://github.com/carpentries/varnish#readme" class="external-link">{varnish}</a></td>
<td>html, css, and javascript templates for The Carpentries (in progress)</td>
</tr>
<tr class="even">
<td><a href="https://docs.ropensci.org/tinkr/" class="external-link">{tinkr}</a></td>
<td>manipulation of knitr markdown documents built on the commonmark xml library</td>
</tr>
<tr class="odd">
<td><a href="https://carpentries.github.io/pegboard" class="external-link">{pegboard}</a></td>
<td>programmatic interface to lesson components for validation (in progress)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="design">Design<a class="anchor" aria-label="anchor" href="#design"></a>
</h2>
<p>This package is designed to make the life of the lesson contributors and maintainers easier by separating the tools needed to build the site from the user-defined content of the site itself. It will no longer rely on Jekyll or any of the other <a href="https://staticsitegenerators.net" class="external-link">&gt;450 static site generators</a>, but instead rely on R, RStudio, and <a href="https://github.com/r-lib/pkgdown#readme" class="external-link">{pkgdown}</a> to generate a site with the following features:</p>
<ul>
<li>
<input type="checkbox" disabled checked>optional offline use</li>
<li>
<input type="checkbox" disabled checked>filename-agnostic episode arrangements</li>
<li>
<input type="checkbox" disabled checked>clear definitions of package versions needed to build the lesson</li>
<li>
<input type="checkbox" disabled>lesson versioning (e.g. I can navigate to <a href="https://swcarpentry.github.io/python-novice-gapminder" class="external-link uri">https://swcarpentry.github.io/python-novice-gapminder</a> for the current version and <a href="https://swcarpentry.github.io/python-novice-gapminder/2020-11" class="external-link uri">https://swcarpentry.github.io/python-novice-gapminder/2020-11</a> for the release in 2020-11)</li>
<li>
<input type="checkbox" disabled checked>seamless updates to the Carpentries’ style</li>
<li>
<input type="checkbox" disabled checked>caching of rendered content for rapid deployment</li>
<li>
<input type="checkbox" disabled>packaging of <a href="https://rstudio.github.io/learnr/index.html" class="external-link">{learnr}</a> materials</li>
<li>
<input type="checkbox" disabled checked>validation of lesson structure</li>
<li>
<input type="checkbox" disabled checked>git aware, but does not require contributors to have git installed</li>
</ul>
<div class="section level3">
<h3 id="rendering-locally">Rendering locally<a class="anchor" aria-label="anchor" href="#rendering-locally"></a>
</h3>
<figure><img src="articles/articles/img/local-flow.dot.svg" alt='diagram of three folders. The first folder, "episodes/", labelled as RMarkdown, has an arrow (labelled as hash episodes) pointing to "site/built/", labelled as Markdown. The Markdown folder has an arrow (labelled as "apply template") pointing to "site/docs/", labelled as "HTML". The first folder is labelled in pale yellow, indicating that it is the only one tracked by git.'><figcaption aria-hidden="true">The local two-step model of deployment into local folders</figcaption></figure><p>In a repository generated via {sandpaper}, only the source is committed to avoid issues surrounding out-of-date artefacts and directory structure confusion.</p>
<p>The website is generated in two steps:</p>
<ol style="list-style-type: decimal">
<li>markdown files from the source files are rendered containing a hash for the source file so that these need only be re-rendered when they change.</li>
<li>html files are generated from the rendered markdown files and the CSS and JS sources in the <a href="https://github.com/carpentries/varnish#readme" class="external-link">{varnish}</a> package for the preview.</li>
</ol>
<p>To ensure there are no clashes between minor differences in the user setup, no artifacts are committed to the main branch of the repository. Because of the caching mechanism between the website and the rendered markdown files, long-running lessons can be updated and previewed quickly.</p>
</div>
<div class="section level3">
<h3 id="rendering-on-continuous-integration">Rendering on continuous integration<a class="anchor" aria-label="anchor" href="#rendering-on-continuous-integration"></a>
</h3>
<figure><img src="articles/articles/img/branch-flow.svg" alt="Diagrammatic representation of the GitHub deployment cycle showing four branches, gh-pages, md-outputs, main, and my-edit. The my-edit branch is a direct descendent of the main branch, while the gh-pages and md-outputs branches are orphans. Each commit of the main branch has a process represented by a dashed arrow that builds a commit of the subsequent orphan branches"><figcaption aria-hidden="true">Two-step deployment model on continuous integration</figcaption></figure><p>Continuous integration will act as the single source-of-truth for how the outputs of the lessons are rendered. For this, we want the resulting website to be:</p>
<ul>
<li>CI agnostic (but currently set up with GitHub)</li>
<li>easy to set up</li>
<li>auditable (e.g. I can see changes between the content of two commits)</li>
<li>versionable (e.g. I can instruct learners to go to <code>&lt;WEBSITE&gt;/1.1</code>. This is inspired from the python documentation style)</li>
</ul>
<p>To acheive this, there will be two branches created: <code>md-outputs</code> and <code>gh-pages</code> that will inerit like so main -&gt; <code>md-outputs</code> -&gt; <code>gh-pages</code>. Because the build time from main to <code>md-outputs</code> can be time intensive, this will default to updating only files that were changed.</p>
<ul>
<li>
<code>md-outputs</code>: this branch will contain the files and artifacts generated from rmarkdown in the vignettes directory of a thin package skeleton.</li>
<li>
<code>gh-pages</code>: this branch is generated via <code>md-outputs</code> and bundles the html, css, and js for the website. This will contain a single <code>index.html</code> file with several subfolders with different versions of the site. The <code>index.html</code> file will redirect to the <code>current/</code> directory, which contains the up-to-date site.</li>
</ul>
<div class="section level4">
<h4 id="scheduled-builds">Scheduled builds<a class="anchor" aria-label="anchor" href="#scheduled-builds"></a>
</h4>
<ul>
<li>
<code>gh-pages</code> website: Because we are designing the lessons to have content separated from the styling, we will set up the CI to generate the webpage from the pre-built sources on a weekly basis, which will check if there has been an update to the styles (which I have in the <a href="https://github.com/carpentries/varnish#readme" class="external-link">{varnish}</a> package) and then rebuild the site without rebuilding the content.</li>
<li>
<code>md-outputs</code> branch: This will be rerun every month from scratch with the most recent version of R and R packages. If there is a change, a pull request can be generated to update the <code>renv.lock</code> file with a link to the changed markdown files in this branch.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="function-syntax">Function syntax<a class="anchor" aria-label="anchor" href="#function-syntax"></a>
</h3>
<p>The functions in {sandpaper} have the following prefixes:</p>
<ul>
<li>
<code>create_</code> will create/amend files or folders in your workspace</li>
<li>
<code>update_</code> will update build resources in the lesson</li>
<li>
<code>build_</code> will build files from your source</li>
<li>
<code>check_</code> validates either the elements of the lesson and/or episodes</li>
<li>
<code>fetch_</code> will download files or resources from the internet</li>
<li>
<code>reset_</code> removes files or information</li>
<li>
<code>get_</code> will retrieve information from your source files as an R object</li>
<li>
<code>set_</code> will update information in files.</li>
<li>
<code>ci_</code> interacts with continous integration to build the website</li>
</ul>
<p>Here is a working list of user-facing functions:</p>
<p><strong>Lesson and Episode Creation</strong></p>
<ul>
<li>
<code><a href="reference/create_lesson.html">create_lesson()</a></code> creates a lesson from scratch</li>
<li>
<code><a href="reference/create_episode.html">create_episode()</a></code> creates a new episode with the correct number prefix</li>
<li>
<code>create_dataset()</code> creates a csv or text data set from an R object</li>
<li>
<code><a href="reference/set_dropdown.html">set_episodes()</a></code> arranges the episodes in a user-specified order</li>
</ul>
<p>Accessors</p>
<ul>
<li>
<code><a href="reference/get_config.html">get_config()</a></code> reads the contents of <code>config.yaml</code> as a list</li>
<li>
<code><a href="reference/get_drafts.html">get_drafts()</a></code> reports files that are not listed in <code>config.yaml</code>
</li>
<li>
<code><a href="reference/get_dropdown.html">get_episodes()</a></code> returns the episode filenames as a vector</li>
<li>
<code><a href="reference/get_syllabus.html">get_syllabus()</a></code> returns the syllabus with timings, titles, and questions</li>
</ul>
<p><strong>Website Creation and Validation</strong></p>
<ul>
<li>
<code><a href="reference/check_lesson.html">check_lesson()</a></code> checks and validates the source files and lesson structure</li>
<li>
<code><a href="reference/build_episode_md.html">build_episode_md()</a></code> renders an individual file to markdown (internal use)</li>
<li>
<code><a href="reference/build_episode_html.html">build_episode_html()</a></code> renders a built markdown file to html (internal use)</li>
<li>
<code><a href="reference/build_lesson.html">build_lesson()</a></code> builds the lesson into a static website</li>
<li>
<code>build_portable_lesson()</code> builds the lesson into a portable static website</li>
<li>
<code>fetch_lesson()</code> fetches the static website from the lesson repository</li>
</ul>
<p><strong>Continuous Integration Utilities</strong></p>
<ul>
<li>
<code><a href="reference/ci_deploy.html">ci_deploy()</a></code> builds and deploys the lesson on CI from the source files</li>
<li>
<code><a href="reference/ci_build_markdown.html">ci_build_markdown()</a></code> builds the markdown files on CI from the source and deploys them to the markdown branch.</li>
<li>
<code><a href="reference/ci_build_site.html">ci_build_site()</a></code> deploys the lesson on CI from pre-rendered markdown files</li>
<li>
<code>ci_release()</code> builds and deploys the lesson on CI from the source files and adds a release tag</li>
<li>
<code><a href="reference/update_github_workflows.html">update_github_workflows()</a></code> updates GitHub workflows</li>
</ul>
<p>Cleanup</p>
<ul>
<li>
<code><a href="reference/reset_episodes.html">reset_episodes()</a></code> removes the schedule from the config.yaml file</li>
<li>
<code><a href="reference/reset_site.html">reset_site()</a></code> clears the website and cache</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>There are five use-cases for {sandpaper}:</p>
<ol style="list-style-type: decimal">
<li>Creating lessons</li>
<li>Contributing to lessons</li>
<li>Maintaining lessons</li>
<li>Rendering a portable site</li>
<li>Rendering a site with GitHub actions.</li>
</ol>
<div class="section level3">
<h3 id="creating-a-lesson">Creating a lesson<a class="anchor" aria-label="anchor" href="#creating-a-lesson"></a>
</h3>
<p>To create a lesson with {sandpaper}, use the <code><a href="reference/create_lesson.html">create_lesson()</a></code> function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sandpaper</span><span class="fu">::</span><span class="fu"><a href="reference/create_lesson.html">create_lesson</a></span><span class="op">(</span><span class="st">"~/Desktop/r-intermediate-penguins"</span><span class="op">)</span></span></code></pre></div>
<p>This will create folder on your desktop called <code>r-intermediate-penguins</code> with the following structure:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">|--</span><span class="st"> </span>.gitignore               <span class="co"># - Ignore everything in the site/ folder</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="op">|--</span><span class="st"> </span>.github<span class="op">/</span><span class="st">                 </span><span class="co"># - Scripts used for continuous integration</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="er">|</span><span class="st">   `</span><span class="dt">-- workflows/           #</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="dt">|       |-- deploy-site.yaml # -   Build the source files on github pages</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="dt">|       |-- build-md.yaml    # -   Build the markdown files on github pages</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="dt">|       </span><span class="st">`</span><span class="op">--</span><span class="st"> </span>cron.yaml        <span class="co"># -   reset package cache and test</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="op">|--</span><span class="st"> </span>episodes<span class="op">/</span><span class="st">                </span><span class="co"># - PUT YOUR MARKDOWN FILES IN THIS FOLDER</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="er">|</span><span class="st">   </span><span class="er">|</span><span class="op">--</span><span class="st"> </span>data<span class="op">/</span><span class="st">                </span><span class="co"># -   Data for your lesson goes here</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="er">|</span><span class="st">   </span><span class="er">|</span><span class="op">--</span><span class="st"> </span>figures<span class="op">/</span><span class="st">             </span><span class="co"># -   All static figures and diagrams are here</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="er">|</span><span class="st">   </span><span class="er">|</span><span class="op">--</span><span class="st"> </span>files<span class="op">/</span><span class="st">               </span><span class="co"># -   Additional files (e.g. handouts) </span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="er">|</span><span class="st">   `</span><span class="dt">-- 00-introducition.Rmd # -   Lessons start with a two-digit number</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="dt">|-- instructors/             # - Information for Instructors</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="dt">|-- learners/                # - Information for Learners</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="dt">|   </span><span class="st">`</span><span class="op">--</span><span class="st"> </span>setup.md             <span class="co"># -   setup instructions (REQUIRED)</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="op">|--</span><span class="st"> </span>profiles<span class="op">/</span><span class="st">                </span><span class="co"># - Learner and/or Instructor Profiles</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="er">|</span><span class="op">--</span><span class="st"> </span>site<span class="op">/</span><span class="st">                    </span><span class="co"># - This folder is where the rendered markdown files and static site will live</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="er">|</span><span class="st">   `</span><span class="dt">-- README.md            # -   placeholder</span></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="dt">|-- config.yaml              # - Use this to configure commonly used variables</span></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="dt">|-- CONTRIBUTING.md          # - Carpentries Rules for Contributions (REQUIRED)</span></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="dt">|-- CODE_OF_CONDUCT.md       # - Carpentries Code of Conduct (REQUIRED)</span></span>
<span id="cb3-21"><a href="#cb3-21"></a><span class="dt">|-- LICENSE.md               # - Carpentries Licenses (REQUIRED)</span></span>
<span id="cb3-22"><a href="#cb3-22"></a><span class="st">`</span><span class="op">--</span><span class="st"> </span>README.md                <span class="co"># - Introduces folks how to use this lesson and where they can find more information.</span></span></code></pre></div>
<p>Once you have your site set up, you can add your RMarkdown files in the episodes folder. By default, they will be built in alphabetical order, but you can use the <code><a href="reference/set_dropdown.html">set_episodes()</a></code> command to build the schedule in your <code>config.yaml</code> file:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu">sandpaper</span><span class="fu">::</span><span class="fu"><a href="reference/get_dropdown.html">get_episodes</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">sandpaper</span><span class="fu">::</span><span class="fu"><a href="reference/set_dropdown.html">set_episodes</a></span><span class="op">(</span>order <span class="op">=</span> <span class="va">s</span>, write <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>When you want to preview your site, use the following:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sandpaper</span><span class="fu">::</span><span class="fu"><a href="reference/build_lesson.html">build_lesson</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<h4 id="working-in-rstudio">Working in RStudio?</h4>
<p>If you are using RStudio, you can preview the lesson site using the keyboard shortcut <kbd>ctrl + shift + B</kbd> (which corresponds to the “Build Website” button in the “Build” tab. To preview individual files, you can use <kbd>ctrl + shift + K</kbd> (This corresponds to the “Knit” button in the editor pane)</p>
</blockquote>
<p>This will create the website structure inside of the the <code>site/</code> folder, render the RMarkdown files to markdown (for inspection and quick rendering), render the markdown files to HTML, and then enable a preview within your browser window.</p>
</div>
<div class="section level3">
<h3 id="contributing-to-a-lesson">Contributing to a Lesson<a class="anchor" aria-label="anchor" href="#contributing-to-a-lesson"></a>
</h3>
<p>To contribute to a lesson, you can either fork the lesson to your own repository and clone it to your computer manually from GitHub, or you can use the {usethis} package to automate it. For example, This is how you can create a copy of <a href="http://swcarpentry.github.io/r-novice-inflammation/" class="external-link"><strong>Programming With R</strong></a> to your computer’s Desktop.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/create_from_github.html" class="external-link">create_from_github</a></span><span class="op">(</span></span>
<span>  repo <span class="op">=</span> <span class="st">"swcarpentry/r-novice-gapminder"</span>, </span>
<span>  destdir <span class="op">=</span> <span class="st">"~/Desktop/r-novice-gampinder"</span>,</span>
<span>  fork <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This will copy all of the source files to your computer and move you to the directory.</p>
<p>Note that the rendered website will not be immediately available. To download the site as it currently appears on the web, use:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sandpaper</span><span class="fu">::</span><span class="fu">fetch_lesson</span><span class="op">(</span>markdown <span class="op">=</span> <span class="cn">TRUE</span>, site <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>This will download the site and the rendered markdown files into the <code>site/</code> folder. To save bandwidth, you can choose to just download the markdown files and artifacts by settin <code>site = FALSE</code>. Now, you can edit the Rmarkdown files in <code>episodes/</code> and quickly render the site.</p>
<p>To upload changes to the lesson repository, you can use the follow</p>
</div>
<div class="section level3">
<h3 id="maintaining-a-lesson">Maintaining a Lesson<a class="anchor" aria-label="anchor" href="#maintaining-a-lesson"></a>
</h3>
<p>When you are maintaining a lesson, there is a high likelihood that you will already have a copy on your machine. If not, follow the instructions in the <a href="#contributing-to-a-lesson">contributing to a lesson</a> section above.</p>
<p>The typical workflow will look like this:</p>
<ol style="list-style-type: decimal">
<li>open the sandpaper project in RStudio and make edits to files in the <code>episodes/</code> folder</li>
<li>in the R console run the following</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sandpaper</span><span class="fu">::</span><span class="fu"><a href="reference/check_lesson.html">check_lesson</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># validates the structure of the input files</span></span>
<span><span class="fu">sandpaper</span><span class="fu">::</span><span class="fu"><a href="reference/build_lesson.html">build_lesson</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># builds and validates lesson</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="rendering-a-portable-site">Rendering a portable site<a class="anchor" aria-label="anchor" href="#rendering-a-portable-site"></a>
</h3>
<p>To render a portable site, you can follow the instructions for <a href="#contributing-to-a-lesson">contributing to a lesson</a> or <a href="#maintaining-a-lesson">maintaining a lesson</a> to set up. Once you have the lesson set up, you can use the following command:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sandpaper</span><span class="fu">::</span><span class="fu">build_portable_lesson</span><span class="op">(</span>version <span class="op">=</span> <span class="st">"current"</span><span class="op">)</span></span></code></pre></div>
<p>This will render a fully portable lesson site as a zip file in the <code>site/</code> folder. You can distribute this lesson to learners who do not have reliable internet access for use offline without sacrificing any of the styling.</p>
</div>
<div class="section level3">
<h3 id="rendering-with-github-actions">Rendering with GitHub actions<a class="anchor" aria-label="anchor" href="#rendering-with-github-actions"></a>
</h3>
<p>Ultimately, there should be a minimal number of functions that handle this situation because writing CI configuration files is maddening. The most straightforward function is:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sandpaper</span><span class="fu">::</span><span class="fu"><a href="reference/ci_deploy.html">ci_deploy</a></span><span class="op">(</span>md_branch <span class="op">=</span> <span class="st">"md-outputs"</span>, site_branch <span class="op">=</span> <span class="st">"gh-pages"</span><span class="op">)</span></span></code></pre></div>
<p>This function will create <a href="https://git-scm.com/docs/git-worktree" class="external-link">git worktrees</a> for the orphan <code>md-outputs</code> branch in the <code>site/built</code> folder and the orphan <code>gh-pages</code> branch in the <code>site/docs</code> folder. After that, we generate the site as normal.</p>
<p>Because css and js libraries may need updating before any lesson material does, a step can be created just for rebuilding the site that uses:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sandpaper</span><span class="fu">::</span><span class="fu"><a href="reference/ci_build_site.html">ci_build_site</a></span><span class="op">(</span>branch <span class="op">=</span> <span class="st">"gh-pages"</span><span class="op">)</span></span></code></pre></div>
<p>When a lesson is given a release, the current site folder needs to be duplicated to a versioned folder and a tag needs to be added to the <code>md-outputs</code> branch:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sandpaper</span><span class="fu">::</span><span class="fu">ci_release</span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"0.1"</span>, md_branch <span class="op">=</span> <span class="st">"md-outputs"</span>, site_branch <span class="op">=</span> <span class="st">"gh-pages"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/carpentries/sandpaper/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/carpentries/sandpaper/issues/" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
<li><a href="SUPPORT.html">Getting help</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing sandpaper</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Zhian N. Kamvar <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1458-7108" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://carpentries.r-universe.dev/ui#builds" class="external-link"><img src="https://carpentries.r-universe.dev/badges/sandpaper" alt="R Universe"></a></li>
<li><a href="https://github.com/carpentries/sandpaper/actions" class="external-link"><img src="https://github.com/carpentries/sandpaper/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://codecov.io/gh/carpentries/sandpaper?branch=main" class="external-link"><img src="https://codecov.io/gh/carpentries/sandpaper/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=sandpaper" class="external-link"><img src="https://www.r-pkg.org/badges/version/sandpaper" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Zhian N. Kamvar.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
