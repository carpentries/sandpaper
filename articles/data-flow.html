<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="sandpaper">
<title>Data and Flow from Source to Website • sandpaper</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Data and Flow from Source to Website">
<meta property="og:description" content="sandpaper">
<meta property="og:image" content="https://carpentries.github.io/sandpaper/logo.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@zkamvar">
<meta name="twitter:site" content="@thecarpentries">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sandpaper</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.16.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/building-with-renv.html">Building Lessons With A Package Cache</a>
    <a class="dropdown-item" href="../articles/automated-pull-requests.html">Working with Automated Pull Requests</a>
    <a class="dropdown-item" href="../articles/include-child-documents.html">Including Child Documents</a>
    <a class="dropdown-item" href="../articles/translations.html">Translating The Workbench</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/carpentries/sandpaper/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Data and Flow from Source to Website</h1>
                        <h4 data-toc-skip class="author">Zhian N.
Kamvar</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/carpentries/sandpaper/blob/HEAD/vignettes/data-flow.Rmd" class="external-link"><code>vignettes/data-flow.Rmd</code></a></small>
      <div class="d-none name"><code>data-flow.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This is a vignette that is designed for R package developers who are
looking to understand how the data flows between the lesson source and
the final website. I am assuming that the person reading this has
familiarity with <a href="https://r-pkgs.org/" class="external-link">R packaging</a> and <a href="https://r-pkgs.org/data.html#sec-data-state" class="external-link">R
environments</a>.</p>
<p>One of the design philosophies of The Workbench is that if a lesson
author or contributor would like to add any sort of metadata or modify a
setting in any given lesson, they can do so by editing the source of the
lesson with no need to modify their workflow.</p>
<div class="section level3">
<h3 id="a-note-about-the-design">A note about the design<a class="anchor" aria-label="anchor" href="#a-note-about-the-design"></a>
</h3>
<p>The design of this is very much PDD (panic-driven design). I was okay
with wracking up technical debt because I knew that I could go back and
refactor once I got it released. If I had a chance to go back and
refactor, I would gladly do so. The creation of muliple storage objects
using function factories was what I knew at the time. I now know that it
might be better to use global environments instead. The implementation
of this was originally done in <a href="https://github.com/carpentries/sandpaper/pull/248" class="external-link">pull request
#248</a>, which was trying to deduplicate code after the release of
version 0.1.0, which was a massive push after finally getting the new
website layout.</p>
<p>The flow of data I lay out here could all live in the same
package-level environment (or even a package-level R6 object) instead of
being implemented as function factories, but that’s a refactor for
another day and another maintainer.</p>
</div>
<div class="section level3">
<h3 id="two-sources-of-metadata">Two Sources of Metadata<a class="anchor" aria-label="anchor" href="#two-sources-of-metadata"></a>
</h3>
<p>Metadata is different from content because, while it is not directly
related to the content, it has extra information that helps the users of
the site navigate the content. For example, each episode page has three
piece of metadata embedded as a YAML list at the top of the source file
that defines the title along with estimated time for teaching and
excercises.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Introduction"</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">teaching</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">exercises</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span></code></pre></div>
<p>In terms of the lesson itself, metadata that is related to the whole
lesson is stored in <code>config.yaml</code>. This YAML file is designed
to be as flat as possible to avoid common problems with writing YAML.
Metadata here include things like the title of the Lesson, the source
page of the lesson, the time it was created, and the lesson program it
belongs to.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"An Example Lesson"</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">carpentry</span><span class="kw">:</span><span class="at"> </span><span class="st">"incubator"</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">created</span><span class="kw">:</span><span class="at"> </span><span class="st">"2023-11-27"</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="fu">life-cycle</span><span class="kw">:</span><span class="at"> </span><span class="st">"pre-alpha"</span></span></code></pre></div>
<p>It also defines optional parameters such as the order of the episodes
and other content that can be used to customise how the lesson is
built.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">episodes</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="at"> </span><span class="kw">-</span><span class="at"> introduction.md</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="at"> </span><span class="kw">-</span><span class="at"> first-example.md</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">handout</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<p>The thing to know about this metdata and these variables is that they
all get passed to {varnish} and are used to control how the lesson
website is built along with the metadata.</p>
</div>
<div class="section level3">
<h3 id="an-introduction-to-varnish">An introduction to <code>{varnish}</code><a class="anchor" aria-label="anchor" href="#an-introduction-to-varnish"></a>
</h3>
<p>In order to understand how to pass data from <code>config.yaml</code>
to {varnish}, it is important to first understand the paradigm of how
{sandpaper} and {varnish} work together to produce a lesson website.
Behind the scenes, we build markdown with {knitr}, render the raw HTML
with Pandoc and then use {pkgdown} to insert the HTML and metadata into
a template (written in <a href="https://mustache.github.io/mustache.5.html" class="external-link">the logicless
templating language, Mustache</a>) that can be updated and modified
independently of {sandpaper}. This template is called {varnish}.</p>
<p>In the paradigm of {pkgdown}, the HTML template is split up into
different components that are rendered separately and then combined into
a single layout template. For example, here is the template that defines
the layout:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co">&lt;!-- START: inst/pkgdown/templates/layout.html --&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">&lt;!-- Generated by pkgdown: do not edit by hand --&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="dt">&lt;!doctype</span> html<span class="dt">&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="ot"> lang</span><span class="op">=</span><span class="st">"{{ lang }}"</span><span class="dt">&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    {{{ head }}}</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>    {{{ header }}}</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"container"</span><span class="dt">&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"row"</span><span class="dt">&gt;</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>        {{{ navbar }}}</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>        {{{ content }}}</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>      <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span><span class="co">&lt;!--/div.row--&gt;</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>      {{{ footer }}} {{! the end of div class container is in footer }}</span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="co">&lt;!-- </span><span class="re">END</span><span class="co">:   inst/pkgdown/templates/layout.html--&gt;</span></span></code></pre></div>
<p>You can see that it contains <code>{{{ head }}}</code>,
<code>{{{ header }}}</code>, <code>{{{ navbar }}}</code>,
<code>{{{ content }}}</code> and <code>{{{ footer }}}</code>. These are
all the results of the other rendered templates. For example, here’s the
<code>head.html</code> template, which defines the content that goes in
the HTML <code>&lt;head&gt;</code> tag (defining titles, metadata,
stylesheets, and JavaScript):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"utf-8"</span><span class="dt">&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>{{#site}}{{<span class="er">&amp;</span>title}}{{/site}}{{#pagetitle}}: {{<span class="er">&amp;</span>pagetitle}}{{/pagetitle}}<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> name</span><span class="op">=</span><span class="st">"viewport"</span><span class="ot"> content</span><span class="op">=</span><span class="st">"width=device-width, initial-scale=1"</span><span class="dt">&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text/css"</span><span class="ot"> href</span><span class="op">=</span><span class="st">"{{#site}}{{root}}{{/site}}assets/styles.css"</span><span class="dt">&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"{{#site}}{{root}}{{/site}}assets/scripts.js"</span><span class="ot"> type=</span><span class="st">"text/javascript"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="co">&lt;!-- mathjax --&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> type=</span><span class="st">"text/x-mathjax-config"</span><span class="dt">&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    MathJax<span class="op">.</span><span class="at">Hub</span><span class="op">.</span><span class="fu">Config</span>({</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>      <span class="dt">config</span><span class="op">:</span> [<span class="st">"MMLorHTML.js"</span>]<span class="op">,</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>      <span class="dt">jax</span><span class="op">:</span> [<span class="st">"input/TeX"</span><span class="op">,</span><span class="st">"input/MathML"</span><span class="op">,</span><span class="st">"output/HTML-CSS"</span><span class="op">,</span><span class="st">"output/NativeMML"</span><span class="op">,</span> <span class="st">"output/PreviewHTML"</span>]<span class="op">,</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>      <span class="dt">extensions</span><span class="op">:</span> [<span class="st">"tex2jax.js"</span><span class="op">,</span><span class="st">"mml2jax.js"</span><span class="op">,</span><span class="st">"MathMenu.js"</span><span class="op">,</span><span class="st">"MathZoom.js"</span><span class="op">,</span> <span class="st">"fast-preview.js"</span><span class="op">,</span> <span class="st">"AssistiveMML.js"</span><span class="op">,</span> <span class="st">"a11y/accessibility-menu.js"</span>]<span class="op">,</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>      <span class="dt">TeX</span><span class="op">:</span> {</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>        <span class="dt">extensions</span><span class="op">:</span> [<span class="st">"AMSmath.js"</span><span class="op">,</span><span class="st">"AMSsymbols.js"</span><span class="op">,</span><span class="st">"noErrors.js"</span><span class="op">,</span><span class="st">"noUndefined.js"</span>]</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>      <span class="dt">tex2jax</span><span class="op">:</span> {</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>        <span class="dt">inlineMath</span><span class="op">:</span> [[<span class="st">'</span><span class="sc">\\</span><span class="st">('</span><span class="op">,</span> <span class="st">'</span><span class="sc">\\</span><span class="st">)'</span>]]<span class="op">,</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>        <span class="dt">displayMath</span><span class="op">:</span> [ [<span class="st">'$$'</span><span class="op">,</span><span class="st">'$$'</span>]<span class="op">,</span> [<span class="st">'</span><span class="sc">\\</span><span class="st">['</span><span class="op">,</span> <span class="st">'</span><span class="sc">\\</span><span class="st">]'</span>] ]<span class="op">,</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>        <span class="dt">processEscapes</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>      }</span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"</span><span class="ot"> integrity</span><span class="op">=</span><span class="st">"sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k="</span><span class="ot"> crossorigin</span><span class="op">=</span><span class="st">"anonymous"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>    <span class="co">&lt;!-- Responsive Favicon for The Carpentries --&gt;</span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"apple-touch-icon"</span><span class="ot"> sizes</span><span class="op">=</span><span class="st">"180x180"</span><span class="ot"> href</span><span class="op">=</span><span class="st">"{{#site}}{{root}}{{/site}}apple-touch-icon.png"</span><span class="dt">&gt;</span></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"icon"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"image/png"</span><span class="ot"> sizes</span><span class="op">=</span><span class="st">"32x32"</span><span class="ot"> href</span><span class="op">=</span><span class="st">"{{#site}}{{root}}{{/site}}favicon-32x32.png"</span><span class="dt">&gt;</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"icon"</span><span class="ot"> type</span><span class="op">=</span><span class="st">"image/png"</span><span class="ot"> sizes</span><span class="op">=</span><span class="st">"16x16"</span><span class="ot"> href</span><span class="op">=</span><span class="st">"{{#site}}{{root}}{{/site}}favicon-16x16.png"</span><span class="dt">&gt;</span></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"manifest"</span><span class="ot"> href</span><span class="op">=</span><span class="st">"{{#site}}{{root}}{{/site}}site.webmanifest"</span><span class="dt">&gt;</span></span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"mask-icon"</span><span class="ot"> href</span><span class="op">=</span><span class="st">"{{#site}}{{root}}{{/site}}safari-pinned-tab.svg"</span><span class="ot"> color</span><span class="op">=</span><span class="st">"#5bbad5"</span><span class="dt">&gt;</span></span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> name</span><span class="op">=</span><span class="st">"msapplication-TileColor"</span><span class="ot"> content</span><span class="op">=</span><span class="st">"#da532c"</span><span class="dt">&gt;</span></span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> name</span><span class="op">=</span><span class="st">"theme-color"</span><span class="ot"> content</span><span class="op">=</span><span class="st">"#ffffff"</span><span class="dt">&gt;</span></span></code></pre></div>
<p>The templates used by {varnish} will take metadata from one of two
sources:</p>
<ol style="list-style-type: decimal">
<li>a <code>_pkgdown.yaml</code> file that defines global metadata like
language (see the <a href="#pkgdown-metadata">pkgdown metadata
section</a> for details.</li>
<li>a list of values passed to the <code><a href="https://pkgdown.r-lib.org/reference/render_page.html" class="external-link">pkgdown::render_page()</a></code>
function. These values can be both global and local.</li>
</ol>
<p>These get inserted into the template via the
<code><a href="https://pkgdown.r-lib.org/reference/render_page.html" class="external-link">pkgdown::render_page()</a></code> function where the contents of the
<code>_pkgdown.yaml</code> file are inserted into the data list as
<code>$yaml</code>.</p>
<p>The challenge for {sandpaper} is this: when we have a list of
per-lesson global variables that need to be allocated when
<code><a href="../reference/build_lesson.html">build_lesson()</a></code> is run and per-file variables that need to
be allocated before every call to <code><a href="../reference/build_html.html">build_html()</a></code>.</p>
<p>The solution that we’ve come up with is to store these lists in
environments that are encapsulated by function factories, which are
detailed in the next section.</p>
</div>
</div>
<div class="section level2">
<h2 id="storage-function-factories">Storage Function Factories<a class="anchor" aria-label="anchor" href="#storage-function-factories"></a>
</h2>
<p>There are two types of storage <a href="https://adv-r.hadley.nz/function-factories.html" class="external-link">function
factories</a> in {sandpaper}: Lesson Store
(<code><a href="../reference/dot-lesson_store.html">.lesson_store()</a></code>) and List Store
(<code><a href="../reference/dot-list_store.html">.list_store()</a></code>). Both of these return lists of functions
that access their calling environments, which are created when the
package is loaded:</p>
<div class="section level3">
<h3 id="list-store">List Store<a class="anchor" aria-label="anchor" href="#list-store"></a>
</h3>
<p>The list store acts like a persistent list that has
<code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code> <code>set()</code>, <code>clear()</code>,
<code>copy()</code> and <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> methods.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span>
<span><span class="va">this_list</span> <span class="op">&lt;-</span> <span class="va">snd</span><span class="op">$</span><span class="fu">.list_store</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">this_list</span><span class="op">)</span></span>
<span><span class="co">## [1] "get"    "update" "set"    "clear"  "copy"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">this_list</span><span class="op">)</span></span>
<span><span class="co">## [1] "list-store"</span></span>
<span></span>
<span><span class="co"># to set a list, use a NULL key</span></span>
<span><span class="va">this_list</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>key <span class="op">=</span> <span class="cn">NULL</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>first <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    C <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      D <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>,</span>
<span>      E <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>,</span>
<span>      F <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span>,</span>
<span>    G <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sleep</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get the list</span></span>
<span><span class="va">this_list</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## $A</span></span>
<span><span class="co">## $A$first</span></span>
<span><span class="co">## [1] 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $B</span></span>
<span><span class="co">## $B$C</span></span>
<span><span class="co">## $B$C$D</span></span>
<span><span class="co">## [1] "a" "b" "c" "d"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $B$C$E</span></span>
<span><span class="co">## [1] 1.414214</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $B$C$F</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $B$G</span></span>
<span><span class="co">##   extra group ID</span></span>
<span><span class="co">## 1   0.7     1  1</span></span>
<span><span class="co">## 2  -1.6     1  2</span></span>
<span><span class="co">## 3  -0.2     1  3</span></span>
<span><span class="co">## 4  -1.2     1  4</span></span>
<span><span class="co">## 5  -0.1     1  5</span></span>
<span><span class="co">## 6   3.4     1  6</span></span>
<span></span>
<span><span class="co"># copy a list so that you can preserve the original list</span></span>
<span><span class="va">that_list</span> <span class="op">&lt;-</span> <span class="va">this_list</span><span class="op">$</span><span class="fu">copy</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># update list elements by adding to them (note: vectors will be replaced)</span></span>
<span><span class="va">that_list</span><span class="op">$</span><span class="fu">update</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>platform <span class="op">=</span> <span class="st">"MY COMPUTER"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">that_list</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## $A</span></span>
<span><span class="co">## $A$first</span></span>
<span><span class="co">## [1] 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $A$platform</span></span>
<span><span class="co">## [1] "MY COMPUTER"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $B</span></span>
<span><span class="co">## $B$C</span></span>
<span><span class="co">## $B$C$D</span></span>
<span><span class="co">## [1] "a" "b" "c" "d"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $B$C$E</span></span>
<span><span class="co">## [1] 1.414214</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $B$C$F</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $B$G</span></span>
<span><span class="co">##   extra group ID</span></span>
<span><span class="co">## 1   0.7     1  1</span></span>
<span><span class="co">## 2  -1.6     1  2</span></span>
<span><span class="co">## 3  -0.2     1  3</span></span>
<span><span class="co">## 4  -1.2     1  4</span></span>
<span><span class="co">## 5  -0.1     1  5</span></span>
<span><span class="co">## 6   3.4     1  6</span></span>
<span></span>
<span><span class="co"># set nested list elements</span></span>
<span><span class="va">that_list</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"platform"</span><span class="op">)</span>, <span class="st">"YOUR COMPUTER"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># note that modified copies do not modify the originals</span></span>
<span><span class="va">that_list</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"A"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">## $first</span></span>
<span><span class="co">## [1] 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $platform</span></span>
<span><span class="co">## [1] "YOUR COMPUTER"</span></span>
<span><span class="va">this_list</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"A"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">## $first</span></span>
<span><span class="co">## [1] 1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="lesson-store">Lesson Store<a class="anchor" aria-label="anchor" href="#lesson-store"></a>
</h3>
<p>This creates the object containing the <code><a href="https://carpentries.github.io/pegboard/reference/Lesson.html" class="external-link">pegboard::Lesson</a></code>
object, that we can use to extract episode-specific metadata along with
the text of the questions. It is a special object because when a lesson
is set with this object, it will additionally set the <em>other</em>
global data.</p>
<p>When {sandpaper} is loaded, the List Store and Lesson Store objects
are created and live in the {sandpaper} namespace as long as the session
is active.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span>
<span><span class="va">some_lesson</span> <span class="op">&lt;-</span> <span class="va">snd</span><span class="op">$</span><span class="fu">.lesson_store</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">some_lesson</span><span class="op">)</span></span>
<span><span class="co">## [1] "get"   "valid" "set"   "clear"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>All of these metadata are collected and stored in memory before the
lesson is built (triggered during <code><a href="../reference/validate_lesson.html">validate_lesson()</a></code>), which
are accessible via the objects defined by the internal
<code>sandpaper:::set_globals()</code>. Here I will set up an example
lesson that I will use to demonstrate these global variables. Please
note that I will be using internal functions in this demonstration.
These internal functions are not guaranteed to be stable outside of the
context of {sandpaper}. Using the <code>asNamespace("sandpaper")</code>
function allows me to create a method for accessing the internal
functions:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://carpentries.github.io/sandpaper/">"sandpaper"</a></span><span class="op">)</span></span>
<span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a new lesson</span></span>
<span><span class="va">lsn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_lesson.html">create_lesson</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"An Example Lesson"</span>,</span>
<span>  rstudio <span class="op">=</span> <span class="cn">TRUE</span>, open <span class="op">=</span> <span class="cn">FALSE</span>, rmd <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># add a new episode</span></span>
<span><span class="fu"><a href="../reference/create_episode.html">create_episode_md</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"First Example"</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, path <span class="op">=</span> <span class="va">lsn</span>, open <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">## /tmp/RtmpmNiZak/file2be118914c61/episodes/first-example.md</span></span></code></pre></div>
<p>Within {sandpaper}, there are environments that contain metadata
related to the whole lesson called <code>.store</code>,
<code>.resources</code>, <code>instructor_globals</code>,
<code>learner_globals</code>, and <code>this_metadata</code>. Before the
lesson is validated, these values are empty:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="va">.store</span><span class="op">)</span></span>
<span><span class="co">## [1] "list"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="va">.store</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="va">this_metadata</span><span class="op">)</span></span>
<span><span class="co">## [1] "list-store"</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">this_metadata</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## list()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="va">.resources</span><span class="op">)</span></span>
<span><span class="co">## [1] "list-store"</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">.resources</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## list()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="va">instructor_globals</span><span class="op">)</span></span>
<span><span class="co">## [1] "list-store"</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">instructor_globals</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## list()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="va">learner_globals</span><span class="op">)</span></span>
<span><span class="co">## [1] "list-store"</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">learner_globals</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## list()</span></span></code></pre></div>
<p>These will contain the following information:</p>
<ul>
<li>
<code>.store</code> a <code><a href="https://carpentries.github.io/pegboard/reference/Lesson.html" class="external-link">pegboard::Lesson</a></code> object that
contains the XML representation of the parsed Markdown source files</li>
<li>
<code>this_metadata</code> the real and computed metadata associated
with the lesson along with the JSON-LD template for generating the
metadata in the footer of the lesson.</li>
<li>
<code>.resources</code> a list of the availabe files used to build
the lesson in the order specified by <code>config.yaml</code>
</li>
<li>
<code>instructor_globals</code> pre-computed global data that
includes the sidebar template, the syllabus, the dropdown menus, and
information about the packages used to build the lesson</li>
<li>
<code>learner_globals</code> same as
<code>instructor_globals</code>, but specifically for learner view</li>
</ul>
<p>When I run <code><a href="../reference/validate_lesson.html">validate_lesson()</a></code> the first time, all the
metadata is collected and parsed from the <code>config.yaml</code>, and
the individual episodes and cached.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first run is always longer than the second</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/validate_lesson.html">validate_lesson</a></span><span class="op">(</span><span class="va">lsn</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## ── Validating Fenced Divs ──────────────────────────────────────────────</span></span>
<span><span class="co">## ── Validating Internal Links and Images ────────────────────────────────</span></span>
<span><span class="co">##    user  system elapsed </span></span>
<span><span class="co">##    0.36    0.04    0.40</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="../reference/validate_lesson.html">validate_lesson</a></span><span class="op">(</span><span class="va">lsn</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## ── Validating Fenced Divs ──────────────────────────────────────────────</span></span>
<span><span class="co">## ── Validating Internal Links and Images ────────────────────────────────</span></span>
<span><span class="co">##    user  system elapsed </span></span>
<span><span class="co">##   0.108   0.000   0.108</span></span></code></pre></div>
<p>The <code><a href="../reference/validate_lesson.html">validate_lesson()</a></code> call will pull from the cache in
<code>.store</code> if it exists and is valid (which means that nothing
in git has changed). If it’s not valid or does not exist, then all of
the global storage is initialised in this general cascade:</p>
<pre><code><span><span class="co">## validate_lesson()</span></span>
<span><span class="co">## └─this_lesson()</span></span>
<span><span class="co">##   ├─.store$valid()</span></span>
<span><span class="co">##   │ ├─gert::git_diff()</span></span>
<span><span class="co">##   │ ├─gert::git_status()</span></span>
<span><span class="co">##   │ └─gert::git_log()</span></span>
<span><span class="co">##   ├─pegboard::Lesson$new()</span></span>
<span><span class="co">##   └─<span style="color: #00BBBB; font-weight: bold;">.store$set()</span></span></span>
<span><span class="co">##     └─set_globals()</span></span>
<span><span class="co">##       ├─initialise_metadata()</span></span>
<span><span class="co">##       │ ├─get_config()</span></span>
<span><span class="co">##       │ ├─template_metadata()</span></span>
<span><span class="co">##       │ └─<span style="color: #00BBBB; font-weight: bold;">this_metadata$set()</span></span></span>
<span><span class="co">##       ├─set_language()</span></span>
<span><span class="co">##       │ └─add_varnish_translations()</span></span>
<span><span class="co">##       │   └─tr_()</span></span>
<span><span class="co">##       │     └─<span style="color: #00BBBB; font-weight: bold;">these$translations</span></span></span>
<span><span class="co">##       ├─set_resource_list()</span></span>
<span><span class="co">##       │ ├─get_resource_list()</span></span>
<span><span class="co">##       │ │ └─get_config()</span></span>
<span><span class="co">##       │ └─<span style="color: #00BBBB; font-weight: bold;">.resources$set()</span></span></span>
<span><span class="co">##       ├─create_sidebar()</span></span>
<span><span class="co">##       ├─create_resources_dropdown()</span></span>
<span><span class="co">##       ├─<span style="color: #00BBBB; font-weight: bold;">learner_globals$set()</span></span></span>
<span><span class="co">##       └─<span style="color: #00BBBB; font-weight: bold;">instructor_globals$set()</span></span></span></code></pre>
<p>Now when we these variables are called, you can see the information
stored in them.</p>
</div>
<div class="section level2">
<h2 id="lesson-storage">Lesson Storage<a class="anchor" aria-label="anchor" href="#lesson-storage"></a>
</h2>
<p>This function stores the <code><a href="https://carpentries.github.io/pegboard/reference/Lesson.html" class="external-link">pegboard::Lesson</a></code> object and is
responsible for initialising and resetting the variable cache.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="va">.store</span><span class="op">)</span></span>
<span><span class="co">## [1] "list"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="va">.store</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## &lt;Lesson&gt;</span></span>
<span><span class="co">##   Public:</span></span>
<span><span class="co">##     blocks: function (type = NULL, level = 0, path = FALSE) </span></span>
<span><span class="co">##     built: NULL</span></span>
<span><span class="co">##     challenges: function (path = FALSE, graph = FALSE, recurse = TRUE) </span></span>
<span><span class="co">##     children: NULL</span></span>
<span><span class="co">##     clone: function (deep = FALSE) </span></span>
<span><span class="co">##     episodes: list</span></span>
<span><span class="co">##     extra: list</span></span>
<span><span class="co">##     files: active binding</span></span>
<span><span class="co">##     get: function (element = NULL, collection = "episodes") </span></span>
<span><span class="co">##     handout: function (path = NULL, solution = FALSE) </span></span>
<span><span class="co">##     has_children: active binding</span></span>
<span><span class="co">##     initialize: function (path = ".", rmd = FALSE, jekyll = TRUE, ...) </span></span>
<span><span class="co">##     isolate_blocks: function () </span></span>
<span><span class="co">##     load_built: function () </span></span>
<span><span class="co">##     n_problems: active binding</span></span>
<span><span class="co">##     overview: FALSE</span></span>
<span><span class="co">##     path: /tmp/RtmpmNiZak/file2be118914c61</span></span>
<span><span class="co">##     reset: function () </span></span>
<span><span class="co">##     rmd: FALSE</span></span>
<span><span class="co">##     sandpaper: TRUE</span></span>
<span><span class="co">##     show_problems: active binding</span></span>
<span><span class="co">##     solutions: function (path = FALSE) </span></span>
<span><span class="co">##     summary: function (collection = "episodes") </span></span>
<span><span class="co">##     thin: function (verbose = TRUE) </span></span>
<span><span class="co">##     trace_lineage: function (episode_path) </span></span>
<span><span class="co">##     validate_divs: function () </span></span>
<span><span class="co">##     validate_headings: function (verbose = TRUE) </span></span>
<span><span class="co">##     validate_links: function () </span></span>
<span><span class="co">##   Private:</span></span>
<span><span class="co">##     deep_clone: function (name, value)</span></span></code></pre></div>
<p>We can check if the cache needs to be reset by using the
<code>$valid()</code> function inside this object, which checks the git
log, git status, and git diff as a global check of the lesson contents.
When nothing changes, it returns TRUE:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span><span class="op">$</span><span class="va">.store</span><span class="op">$</span><span class="fu">valid</span><span class="op">(</span><span class="va">lsn</span><span class="op">)</span></span>
<span><span class="co">## [1] TRUE</span></span></code></pre></div>
<p>However, if we update the lesson contents in some way by setting a
config variable, it will be <code>FALSE</code>, indicating that it needs
to be reset:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_config.html">set_config</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>handout <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, path <span class="op">=</span> <span class="va">lsn</span>, write <span class="op">=</span> <span class="cn">TRUE</span>, create <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Writing to <span style="color: #0000BB;">/tmp/RtmpmNiZak/file2be118914c61/config.yaml</span></span></span>
<span><span class="co">## → NA -&gt; handout: true</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">.store</span><span class="op">$</span><span class="fu">valid</span><span class="op">(</span><span class="va">lsn</span><span class="op">)</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">.store</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="va">lsn</span><span class="op">)</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">.store</span><span class="op">$</span><span class="fu">valid</span><span class="op">(</span><span class="va">lsn</span><span class="op">)</span></span>
<span><span class="co">## [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="metadata">Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h2>
<p>The metadata is used to store the content of <code>config.yaml</code>
and to provide computed metadata for a lesson that is included in the
footer as a JSON-LD object, which is useful for indexing. Note that this
metadata must be duplicated for each page to give the correct URL and
identifiers.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">this_metadata</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## $carpentry</span></span>
<span><span class="co">## [1] "incubator"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title</span></span>
<span><span class="co">## [1] "An Example Lesson"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $created</span></span>
<span><span class="co">## [1] "2024-05-07"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $keywords</span></span>
<span><span class="co">## [1] "software, data, lesson, The Carpentries"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $life_cycle</span></span>
<span><span class="co">## [1] "pre-alpha"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $license</span></span>
<span><span class="co">## [1] "CC-BY 4.0"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $source</span></span>
<span><span class="co">## [1] "https://github.com/carpentries/file2be118914c61"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $branch</span></span>
<span><span class="co">## [1] "main"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $contact</span></span>
<span><span class="co">## [1] "team@carpentries.org"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $episodes</span></span>
<span><span class="co">## [1] "introduction.md"  "first-example.md"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $metadata_template</span></span>
<span><span class="co">##  [1] "{{=&lt;% %&gt;=}}"                                                                                                                                       </span></span>
<span><span class="co">##  [2] "{"                                                                                                                                                 </span></span>
<span><span class="co">##  [3] "  \"@context\": \"https://schema.org\","                                                                                                           </span></span>
<span><span class="co">##  [4] "  \"@type\": \"TrainingMaterial\","                                                                                                                </span></span>
<span><span class="co">##  [5] "  \"@id\": \"&lt;% url %&gt;\","                                                                                                                         </span></span>
<span><span class="co">##  [6] "  \"inLanguage\": \"&lt;% lang %&gt;\","                                                                                                                 </span></span>
<span><span class="co">##  [7] "  \"dct:conformsTo\": \"https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE\","                                                           </span></span>
<span><span class="co">##  [8] "  \"description\": \"&lt;% desc %&gt;&lt;% ^desc %&gt;A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide&lt;% /desc %&gt;\","</span></span>
<span><span class="co">##  [9] "  \"keywords\": \"&lt;% keywords %&gt;&lt;% ^keywords %&gt;software,data,lesson,The Carpentries&lt;% /keywords %&gt;\","                                             </span></span>
<span><span class="co">## [10] "  \"name\": \"&lt;% &amp;pagetitle %&gt;\","                                                                                                                 </span></span>
<span><span class="co">## [11] "  \"creativeWorkStatus\": \"active\","                                                                                                             </span></span>
<span><span class="co">## [12] "  \"url\": \"&lt;% url %&gt;\","                                                                                                                         </span></span>
<span><span class="co">## [13] "  \"identifier\": \"&lt;% url %&gt;\","                                                                                                                  </span></span>
<span><span class="co">## [14] "  &lt;% #date %&gt;\"dateCreated\": \"&lt;% created %&gt;\","                                                                                                  </span></span>
<span><span class="co">## [15] "  \"dateModified\": \"&lt;% modified %&gt;\","                                                                                                           </span></span>
<span><span class="co">## [16] "  \"datePublished\": \"&lt;% published %&gt;\"&lt;% /date %&gt;"                                                                                               </span></span>
<span><span class="co">## [17] "}"                                                                                                                                                 </span></span>
<span><span class="co">## [18] "&lt;%={{ }}=%&gt;"                                                                                                                                       </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $pagetitle</span></span>
<span><span class="co">## [1] "An Example Lesson"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $date</span></span>
<span><span class="co">## $date$created</span></span>
<span><span class="co">## [1] "2024-05-07"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $date$modified</span></span>
<span><span class="co">## [1] "2024-05-07"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $date$published</span></span>
<span><span class="co">## [1] "2024-05-07"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $url</span></span>
<span><span class="co">## [1] "https://carpentries.github.io/file2be118914c61/"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $citation</span></span>
<span><span class="co">## [1] "CITATION"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $overview</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $handout</span></span>
<span><span class="co">## [1] TRUE</span></span></code></pre></div>
<p>This metadata is rendered as JSON-LD and passed as a new variable to
{varnish} using the internal <code>fill_metadata_template()</code>
function:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="fu">fill_metadata_template</span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="va">this_metadata</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## {</span></span>
<span><span class="co">##   "@context": "https://schema.org",</span></span>
<span><span class="co">##   "@type": "TrainingMaterial",</span></span>
<span><span class="co">##   "@id": "https://carpentries.github.io/file2be118914c61/index.html",</span></span>
<span><span class="co">##   "inLanguage": "en",</span></span>
<span><span class="co">##   "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",</span></span>
<span><span class="co">##   "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",</span></span>
<span><span class="co">##   "keywords": "software, data, lesson, The Carpentries",</span></span>
<span><span class="co">##   "name": "An Example Lesson",</span></span>
<span><span class="co">##   "creativeWorkStatus": "active",</span></span>
<span><span class="co">##   "url": "https://carpentries.github.io/file2be118914c61/index.html",</span></span>
<span><span class="co">##   "identifier": "https://carpentries.github.io/file2be118914c61/index.html",</span></span>
<span><span class="co">##   "dateCreated": "2024-05-07",</span></span>
<span><span class="co">##   "dateModified": "2024-05-07",</span></span>
<span><span class="co">##   "datePublished": "2024-05-07"</span></span>
<span><span class="co">## }</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="lesson-resources-files">Lesson Resources (files)<a class="anchor" aria-label="anchor" href="#lesson-resources-files"></a>
</h2>
<p>The next thing that we store globally are the resources we use to
build the lesson. This allows us to avoid needing to constantly read the
file system:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">.resources</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## $.</span></span>
<span><span class="co">##   /tmp/RtmpmNiZak/file2be118914c61/CODE_OF_CONDUCT.md </span></span>
<span><span class="co">## "/tmp/RtmpmNiZak/file2be118914c61/CODE_OF_CONDUCT.md" </span></span>
<span><span class="co">##           /tmp/RtmpmNiZak/file2be118914c61/LICENSE.md </span></span>
<span><span class="co">##         "/tmp/RtmpmNiZak/file2be118914c61/LICENSE.md" </span></span>
<span><span class="co">##          /tmp/RtmpmNiZak/file2be118914c61/config.yaml </span></span>
<span><span class="co">##        "/tmp/RtmpmNiZak/file2be118914c61/config.yaml" </span></span>
<span><span class="co">##             /tmp/RtmpmNiZak/file2be118914c61/index.md </span></span>
<span><span class="co">##           "/tmp/RtmpmNiZak/file2be118914c61/index.md" </span></span>
<span><span class="co">##             /tmp/RtmpmNiZak/file2be118914c61/links.md </span></span>
<span><span class="co">##           "/tmp/RtmpmNiZak/file2be118914c61/links.md" </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $episodes</span></span>
<span><span class="co">##    /tmp/RtmpmNiZak/file2be118914c61/episodes/introduction.md </span></span>
<span><span class="co">##  "/tmp/RtmpmNiZak/file2be118914c61/episodes/introduction.md" </span></span>
<span><span class="co">##   /tmp/RtmpmNiZak/file2be118914c61/episodes/first-example.md </span></span>
<span><span class="co">## "/tmp/RtmpmNiZak/file2be118914c61/episodes/first-example.md" </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $instructors</span></span>
<span><span class="co">##   /tmp/RtmpmNiZak/file2be118914c61/instructors/instructor-notes.md </span></span>
<span><span class="co">## "/tmp/RtmpmNiZak/file2be118914c61/instructors/instructor-notes.md" </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $learners</span></span>
<span><span class="co">##   /tmp/RtmpmNiZak/file2be118914c61/learners/reference.md </span></span>
<span><span class="co">## "/tmp/RtmpmNiZak/file2be118914c61/learners/reference.md" </span></span>
<span><span class="co">##       /tmp/RtmpmNiZak/file2be118914c61/learners/setup.md </span></span>
<span><span class="co">##     "/tmp/RtmpmNiZak/file2be118914c61/learners/setup.md" </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $profiles</span></span>
<span><span class="co">##   /tmp/RtmpmNiZak/file2be118914c61/profiles/learner-profiles.md </span></span>
<span><span class="co">## "/tmp/RtmpmNiZak/file2be118914c61/profiles/learner-profiles.md" </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`renv/profiles/lesson-requirements`</span></span>
<span><span class="co">##                                                                                </span></span>
<span><span class="co">## "/tmp/RtmpmNiZak/file2be118914c61/renv/profiles/lesson-requirements/renv.lock"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="global-and-local-variables">Global and Local Variables<a class="anchor" aria-label="anchor" href="#global-and-local-variables"></a>
</h2>
<p>The rest are global and local variables that are recorded in the
<code>instructor_globals</code> and <code>learner_globals</code>. These
are copied for each page and updated with local data (e.g. the sidebar
needs to include headings for the current page).</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">instructor_globals</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## $aio</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $instructor</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $sidebar</span></span>
<span><span class="co">## [1] "&lt;div class=\"accordion accordion-flush\" id=\"accordionFlush1\"&gt;\n  &lt;div class=\"accordion-item\"&gt;\n    &lt;div class=\"accordion-header\" id=\"flush-heading1\"&gt;\n        &lt;a href=\"index.html\"&gt;Summary and Schedule&lt;/a&gt;\n    &lt;/div&gt;&lt;!--/div.accordion-header--&gt;\n        \n  &lt;/div&gt;&lt;!--/div.accordion-item--&gt;\n&lt;/div&gt;&lt;!--/div.accordion-flush--&gt;\n"  </span></span>
<span><span class="co">## [2] "&lt;div class=\"accordion accordion-flush\" id=\"accordionFlush2\"&gt;\n  &lt;div class=\"accordion-item\"&gt;\n    &lt;div class=\"accordion-header\" id=\"flush-heading2\"&gt;\n        &lt;a href='introduction.html'&gt;1. introduction&lt;/a&gt;\n    &lt;/div&gt;&lt;!--/div.accordion-header--&gt;\n        \n  &lt;/div&gt;&lt;!--/div.accordion-item--&gt;\n&lt;/div&gt;&lt;!--/div.accordion-flush--&gt;\n"  </span></span>
<span><span class="co">## [3] "&lt;div class=\"accordion accordion-flush\" id=\"accordionFlush3\"&gt;\n  &lt;div class=\"accordion-item\"&gt;\n    &lt;div class=\"accordion-header\" id=\"flush-heading3\"&gt;\n        &lt;a href='first-example.html'&gt;2. First Example&lt;/a&gt;\n    &lt;/div&gt;&lt;!--/div.accordion-header--&gt;\n        \n  &lt;/div&gt;&lt;!--/div.accordion-item--&gt;\n&lt;/div&gt;&lt;!--/div.accordion-flush--&gt;\n"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $more</span></span>
<span><span class="co">## [1] "&lt;hr&gt;&lt;li&gt;&lt;a class='dropdown-item' href='reference.html'&gt;Reference&lt;/a&gt;&lt;/li&gt;"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $resources</span></span>
<span><span class="co">## [1] "&lt;hr&gt;&lt;li&gt;&lt;a class='dropdown-item' href='reference.html'&gt;Reference&lt;/a&gt;&lt;/li&gt;"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate</span></span>
<span><span class="co">## $translate$SkipToMain</span></span>
<span><span class="co">## [1] "Skip to main content"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$iPreAlpha</span></span>
<span><span class="co">## [1] "Pre-Alpha"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$PreAlphaNote</span></span>
<span><span class="co">## [1] "This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$AlphaNote</span></span>
<span><span class="co">## [1] "This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$iAlpha</span></span>
<span><span class="co">## [1] "Alpha"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$BetaNote</span></span>
<span><span class="co">## [1] "This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$iBeta</span></span>
<span><span class="co">## [1] "Beta"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$PeerReview</span></span>
<span><span class="co">## [1] "This lesson has passed peer review."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$InstructorView</span></span>
<span><span class="co">## [1] "Instructor View"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$LearnerView</span></span>
<span><span class="co">## [1] "Learner View"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$MainNavigation</span></span>
<span><span class="co">## [1] "Main Navigation"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ToggleNavigation</span></span>
<span><span class="co">## [1] "Toggle Navigation"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Menu</span></span>
<span><span class="co">## [1] "Menu"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$SearchButton</span></span>
<span><span class="co">## [1] "Search the All In One page"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Setup</span></span>
<span><span class="co">## [1] "Setup"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$KeyPoints</span></span>
<span><span class="co">## [1] "Key Points"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$InstructorNotes</span></span>
<span><span class="co">## [1] "Instructor Notes"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Glossary</span></span>
<span><span class="co">## [1] "Glossary"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$LearnerProfiles</span></span>
<span><span class="co">## [1] "Learner Profiles"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$More</span></span>
<span><span class="co">## [1] "More"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$LessonProgress</span></span>
<span><span class="co">## [1] "Lesson Progress"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$CloseMenu</span></span>
<span><span class="co">## [1] "close menu"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$EPISODES</span></span>
<span><span class="co">## [1] "EPISODES"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Home</span></span>
<span><span class="co">## [1] "Home"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$HomePageNav</span></span>
<span><span class="co">## [1] "Home Page Navigation"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$RESOURCES</span></span>
<span><span class="co">## [1] "RESOURCES"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ExtractAllImages</span></span>
<span><span class="co">## [1] "Extract All Images"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$AIO</span></span>
<span><span class="co">## [1] "See all in one page"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$DownloadHandout</span></span>
<span><span class="co">## [1] "Download Lesson Handout"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ExportSlides</span></span>
<span><span class="co">## [1] "Export Chapter Slides"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$PreviousAndNext</span></span>
<span><span class="co">## [1] "Previous and Next Chapter"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Previous</span></span>
<span><span class="co">## [1] "Previous"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$EstimatedTime</span></span>
<span><span class="co">## [1] "Estimated time: {icons$clock} {minutes} minutes"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Next</span></span>
<span><span class="co">## [1] "Next"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$NextChapter</span></span>
<span><span class="co">## [1] "Next Chapter"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$LastUpdate</span></span>
<span><span class="co">## [1] "Last updated on {updated}"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$EditThisPage</span></span>
<span><span class="co">## [1] "Edit this page"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ExpandAllSolutions</span></span>
<span><span class="co">## [1] "Expand All Solutions"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$SetupInstructions</span></span>
<span><span class="co">## [1] "Setup Instructions"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$DownloadFiles</span></span>
<span><span class="co">## [1] "Download files required for the lesson"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ActualScheduleNote</span></span>
<span><span class="co">## [1] "The actual schedule may vary slightly depending on the topics and exercises chosen by the instructor."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$BackToTop</span></span>
<span><span class="co">## [1] "Back To Top"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$SpanToTop</span></span>
<span><span class="co">## [1] "&lt;(Back)&gt; To Top"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ThisLessonCoC</span></span>
<span><span class="co">## [1] "This lesson is subject to the &lt;(Code of Conduct)&gt;"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$CoC</span></span>
<span><span class="co">## [1] "Code of Conduct"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$EditOnGH</span></span>
<span><span class="co">## [1] "Edit on GitHub"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Contributing</span></span>
<span><span class="co">## [1] "Contributing"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Source</span></span>
<span><span class="co">## [1] "Source"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Cite</span></span>
<span><span class="co">## [1] "Cite"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Contact</span></span>
<span><span class="co">## [1] "Contact"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$About</span></span>
<span><span class="co">## [1] "About"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$MaterialsLicensedUnder</span></span>
<span><span class="co">## [1] "Materials licensed under {license} by the authors"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$TemplateLicense</span></span>
<span><span class="co">## [1] "Template licensed under &lt;(CC-BY 4.0)&gt; by {template_authors}"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Carpentries</span></span>
<span><span class="co">## [1] "The Carpentries"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$BuiltWith</span></span>
<span><span class="co">## [1] "Built with {sandpaper_link}, {pegboard_link}, and {varnish_link}"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ExpandAllSolutions</span></span>
<span><span class="co">## [1] "Expand All Solutions"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$CollapseAllSolutions</span></span>
<span><span class="co">## [1] "Collapse All Solutions"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Collapse</span></span>
<span><span class="co">## [1] "Collapse"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Episodes</span></span>
<span><span class="co">## [1] "Episodes"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$GiveFeedback</span></span>
<span><span class="co">## [1] "Give Feedback"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$LearnMore</span></span>
<span><span class="co">## [1] "Learn More"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $sandpaper_version</span></span>
<span><span class="co">##  (0.16.4)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $sandpaper_cfg</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $pegboard_version</span></span>
<span><span class="co">##  (0.7.5)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $pegboard_cfg</span></span>
<span><span class="co">## [1] "carpentries/pegboard/tree/a32a7836d4455f407c3cafe8ab95edc636e5e919"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $varnish_version</span></span>
<span><span class="co">##  (1.0.2)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $varnish_cfg</span></span>
<span><span class="co">## [1] "carpentries/varnish/tree/9d98f8ca03c0c0ff0d0f20e75e92eae4d08968d8"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $sandpaper_link</span></span>
<span><span class="co">## &lt;a href="https://github.com/carpentries/sandpaper"&gt;sandpaper (0.16.4)&lt;/a&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $pegboard_link</span></span>
<span><span class="co">## &lt;a href="https://github.com/carpentries/pegboard/tree/a32a7836d4455f407c3cafe8ab95edc636e5e919"&gt;pegboard (0.7.5)&lt;/a&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $varnish_link</span></span>
<span><span class="co">## &lt;a href="https://github.com/carpentries/varnish/tree/9d98f8ca03c0c0ff0d0f20e75e92eae4d08968d8"&gt;varnish (1.0.2)&lt;/a&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $syllabus</span></span>
<span><span class="co">##                        episode timings               path percents</span></span>
<span><span class="co">## introduction.md   introduction 00h 00m  introduction.html        0</span></span>
<span><span class="co">## first-example.md First Example 00h 12m first-example.html       50</span></span>
<span><span class="co">##                         Finish 00h 24m                         100</span></span>
<span><span class="co">##                                                                      questions</span></span>
<span><span class="co">## introduction.md  How do you write a lesson using R Markdown and `{sandpaper}`?</span></span>
<span><span class="co">## first-example.md How do you write a lesson using R Markdown and `{sandpaper}`?</span></span>
<span><span class="co">##                                                                               </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $overview</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="va">learner_globals</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">## $aio</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $instructor</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $sidebar</span></span>
<span><span class="co">## [1] "&lt;div class=\"accordion accordion-flush\" id=\"accordionFlush1\"&gt;\n  &lt;div class=\"accordion-item\"&gt;\n    &lt;div class=\"accordion-header\" id=\"flush-heading1\"&gt;\n        &lt;a href=\"index.html\"&gt;Summary and Setup&lt;/a&gt;\n    &lt;/div&gt;&lt;!--/div.accordion-header--&gt;\n        \n  &lt;/div&gt;&lt;!--/div.accordion-item--&gt;\n&lt;/div&gt;&lt;!--/div.accordion-flush--&gt;\n"     </span></span>
<span><span class="co">## [2] "&lt;div class=\"accordion accordion-flush\" id=\"accordionFlush2\"&gt;\n  &lt;div class=\"accordion-item\"&gt;\n    &lt;div class=\"accordion-header\" id=\"flush-heading2\"&gt;\n        &lt;a href='introduction.html'&gt;1. introduction&lt;/a&gt;\n    &lt;/div&gt;&lt;!--/div.accordion-header--&gt;\n        \n  &lt;/div&gt;&lt;!--/div.accordion-item--&gt;\n&lt;/div&gt;&lt;!--/div.accordion-flush--&gt;\n"  </span></span>
<span><span class="co">## [3] "&lt;div class=\"accordion accordion-flush\" id=\"accordionFlush3\"&gt;\n  &lt;div class=\"accordion-item\"&gt;\n    &lt;div class=\"accordion-header\" id=\"flush-heading3\"&gt;\n        &lt;a href='first-example.html'&gt;2. First Example&lt;/a&gt;\n    &lt;/div&gt;&lt;!--/div.accordion-header--&gt;\n        \n  &lt;/div&gt;&lt;!--/div.accordion-item--&gt;\n&lt;/div&gt;&lt;!--/div.accordion-flush--&gt;\n"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $more</span></span>
<span><span class="co">## [1] "&lt;li&gt;&lt;a class='dropdown-item' href='reference.html'&gt;Reference&lt;/a&gt;&lt;/li&gt;"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $resources</span></span>
<span><span class="co">## [1] "&lt;li&gt;&lt;a href='reference.html'&gt;Reference&lt;/a&gt;&lt;/li&gt;"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate</span></span>
<span><span class="co">## $translate$SkipToMain</span></span>
<span><span class="co">## [1] "Skip to main content"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$iPreAlpha</span></span>
<span><span class="co">## [1] "Pre-Alpha"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$PreAlphaNote</span></span>
<span><span class="co">## [1] "This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$AlphaNote</span></span>
<span><span class="co">## [1] "This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$iAlpha</span></span>
<span><span class="co">## [1] "Alpha"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$BetaNote</span></span>
<span><span class="co">## [1] "This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$iBeta</span></span>
<span><span class="co">## [1] "Beta"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$PeerReview</span></span>
<span><span class="co">## [1] "This lesson has passed peer review."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$InstructorView</span></span>
<span><span class="co">## [1] "Instructor View"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$LearnerView</span></span>
<span><span class="co">## [1] "Learner View"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$MainNavigation</span></span>
<span><span class="co">## [1] "Main Navigation"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ToggleNavigation</span></span>
<span><span class="co">## [1] "Toggle Navigation"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Menu</span></span>
<span><span class="co">## [1] "Menu"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$SearchButton</span></span>
<span><span class="co">## [1] "Search the All In One page"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Setup</span></span>
<span><span class="co">## [1] "Setup"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$KeyPoints</span></span>
<span><span class="co">## [1] "Key Points"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$InstructorNotes</span></span>
<span><span class="co">## [1] "Instructor Notes"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Glossary</span></span>
<span><span class="co">## [1] "Glossary"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$LearnerProfiles</span></span>
<span><span class="co">## [1] "Learner Profiles"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$More</span></span>
<span><span class="co">## [1] "More"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$LessonProgress</span></span>
<span><span class="co">## [1] "Lesson Progress"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$CloseMenu</span></span>
<span><span class="co">## [1] "close menu"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$EPISODES</span></span>
<span><span class="co">## [1] "EPISODES"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Home</span></span>
<span><span class="co">## [1] "Home"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$HomePageNav</span></span>
<span><span class="co">## [1] "Home Page Navigation"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$RESOURCES</span></span>
<span><span class="co">## [1] "RESOURCES"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ExtractAllImages</span></span>
<span><span class="co">## [1] "Extract All Images"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$AIO</span></span>
<span><span class="co">## [1] "See all in one page"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$DownloadHandout</span></span>
<span><span class="co">## [1] "Download Lesson Handout"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ExportSlides</span></span>
<span><span class="co">## [1] "Export Chapter Slides"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$PreviousAndNext</span></span>
<span><span class="co">## [1] "Previous and Next Chapter"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Previous</span></span>
<span><span class="co">## [1] "Previous"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$EstimatedTime</span></span>
<span><span class="co">## [1] "Estimated time: {icons$clock} {minutes} minutes"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Next</span></span>
<span><span class="co">## [1] "Next"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$NextChapter</span></span>
<span><span class="co">## [1] "Next Chapter"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$LastUpdate</span></span>
<span><span class="co">## [1] "Last updated on {updated}"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$EditThisPage</span></span>
<span><span class="co">## [1] "Edit this page"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ExpandAllSolutions</span></span>
<span><span class="co">## [1] "Expand All Solutions"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$SetupInstructions</span></span>
<span><span class="co">## [1] "Setup Instructions"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$DownloadFiles</span></span>
<span><span class="co">## [1] "Download files required for the lesson"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ActualScheduleNote</span></span>
<span><span class="co">## [1] "The actual schedule may vary slightly depending on the topics and exercises chosen by the instructor."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$BackToTop</span></span>
<span><span class="co">## [1] "Back To Top"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$SpanToTop</span></span>
<span><span class="co">## [1] "&lt;(Back)&gt; To Top"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ThisLessonCoC</span></span>
<span><span class="co">## [1] "This lesson is subject to the &lt;(Code of Conduct)&gt;"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$CoC</span></span>
<span><span class="co">## [1] "Code of Conduct"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$EditOnGH</span></span>
<span><span class="co">## [1] "Edit on GitHub"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Contributing</span></span>
<span><span class="co">## [1] "Contributing"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Source</span></span>
<span><span class="co">## [1] "Source"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Cite</span></span>
<span><span class="co">## [1] "Cite"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Contact</span></span>
<span><span class="co">## [1] "Contact"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$About</span></span>
<span><span class="co">## [1] "About"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$MaterialsLicensedUnder</span></span>
<span><span class="co">## [1] "Materials licensed under {license} by the authors"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$TemplateLicense</span></span>
<span><span class="co">## [1] "Template licensed under &lt;(CC-BY 4.0)&gt; by {template_authors}"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Carpentries</span></span>
<span><span class="co">## [1] "The Carpentries"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$BuiltWith</span></span>
<span><span class="co">## [1] "Built with {sandpaper_link}, {pegboard_link}, and {varnish_link}"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$ExpandAllSolutions</span></span>
<span><span class="co">## [1] "Expand All Solutions"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$CollapseAllSolutions</span></span>
<span><span class="co">## [1] "Collapse All Solutions"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Collapse</span></span>
<span><span class="co">## [1] "Collapse"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$Episodes</span></span>
<span><span class="co">## [1] "Episodes"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$GiveFeedback</span></span>
<span><span class="co">## [1] "Give Feedback"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $translate$LearnMore</span></span>
<span><span class="co">## [1] "Learn More"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $sandpaper_version</span></span>
<span><span class="co">##  (0.16.4)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $sandpaper_cfg</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $pegboard_version</span></span>
<span><span class="co">##  (0.7.5)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $pegboard_cfg</span></span>
<span><span class="co">## [1] "carpentries/pegboard/tree/a32a7836d4455f407c3cafe8ab95edc636e5e919"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $varnish_version</span></span>
<span><span class="co">##  (1.0.2)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $varnish_cfg</span></span>
<span><span class="co">## [1] "carpentries/varnish/tree/9d98f8ca03c0c0ff0d0f20e75e92eae4d08968d8"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $sandpaper_link</span></span>
<span><span class="co">## &lt;a href="https://github.com/carpentries/sandpaper"&gt;sandpaper (0.16.4)&lt;/a&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $pegboard_link</span></span>
<span><span class="co">## &lt;a href="https://github.com/carpentries/pegboard/tree/a32a7836d4455f407c3cafe8ab95edc636e5e919"&gt;pegboard (0.7.5)&lt;/a&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $varnish_link</span></span>
<span><span class="co">## &lt;a href="https://github.com/carpentries/varnish/tree/9d98f8ca03c0c0ff0d0f20e75e92eae4d08968d8"&gt;varnish (1.0.2)&lt;/a&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $overview</span></span>
<span><span class="co">## [1] FALSE</span></span></code></pre></div>
<div class="section level3">
<h3 id="translations">Translations<a class="anchor" aria-label="anchor" href="#translations"></a>
</h3>
<p>In the majority of the {varnish} templates are keys that need
translations that are in the format of
<code>{{ translate.ThingInPascalCase }}</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co">&lt;!-- START: inst/pkgdown/templates/content-syllabus.html --&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"col-xl-12 col-lg-12"</span><span class="dt">&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">main</span><span class="ot"> id</span><span class="op">=</span><span class="st">"main-content"</span><span class="ot"> class</span><span class="op">=</span><span class="st">"main-content"</span><span class="dt">&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>{{<span class="er">&amp;</span> pagetitle }}<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"container lesson-content"</span><span class="dt">&gt;</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>          {{# translate.LastUpdate }} {{<span class="er">&amp;</span> translate.LastUpdate }} |{{/ translate.LastUpdate }}</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>          <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"{{#yaml}}{{source}}/edit/{{branch}}/{{/yaml}}{{file_source}}{{^file_source}}index.md{{/file_source}}"</span><span class="dt">&gt;</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>            {{ translate.EditThisPage }} <span class="dt">&lt;</span><span class="kw">i</span><span class="ot"> aria-hidden</span><span class="op">=</span><span class="st">"true"</span><span class="ot"> data-feather</span><span class="op">=</span><span class="st">"edit"</span><span class="dt">&gt;&lt;/</span><span class="kw">i</span><span class="dt">&gt;</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>          <span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>        <span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>      {{<span class="er">&amp;</span> readme }}</span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>      {{#syllabus}}</span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">section</span><span class="ot"> id</span><span class="op">=</span><span class="st">"schedule"</span><span class="dt">&gt;</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">table</span><span class="ot"> class</span><span class="op">=</span><span class="st">"table schedule table-striped"</span><span class="ot"> role</span><span class="op">=</span><span class="st">"presentation"</span><span class="dt">&gt;</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a>        <span class="dt">&lt;</span><span class="kw">tbody</span><span class="dt">&gt;</span></span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a>          {{#setup}}</span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a>          <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a>            <span class="dt">&lt;</span><span class="kw">td</span><span class="dt">&gt;&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">"#setup"</span><span class="dt">&gt;</span>{{ translate.SetupInstructions }}<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span> {{ translate.DownloadFiles }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;</span></span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a>          <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb20-23"><a href="#cb20-23" tabindex="-1"></a>          {{/setup}}</span>
<span id="cb20-24"><a href="#cb20-24" tabindex="-1"></a>          {{<span class="er">&amp;</span> syllabus }}</span>
<span id="cb20-25"><a href="#cb20-25" tabindex="-1"></a>      <span class="dt">&lt;/</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb20-26"><a href="#cb20-26" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb20-27"><a href="#cb20-27" tabindex="-1"></a>      {{ translate.ActualScheduleNote }}</span>
<span id="cb20-28"><a href="#cb20-28" tabindex="-1"></a>      <span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb20-29"><a href="#cb20-29" tabindex="-1"></a>      <span class="dt">&lt;/</span><span class="kw">section</span><span class="dt">&gt;</span></span>
<span id="cb20-30"><a href="#cb20-30" tabindex="-1"></a>      {{/syllabus}}</span>
<span id="cb20-31"><a href="#cb20-31" tabindex="-1"></a>      {{#setup}}</span>
<span id="cb20-32"><a href="#cb20-32" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">section</span><span class="ot"> id</span><span class="op">=</span><span class="st">"setup"</span><span class="dt">&gt;</span></span>
<span id="cb20-33"><a href="#cb20-33" tabindex="-1"></a>      {{{setup}}}</span>
<span id="cb20-34"><a href="#cb20-34" tabindex="-1"></a>      <span class="dt">&lt;/</span><span class="kw">section</span><span class="dt">&gt;</span></span>
<span id="cb20-35"><a href="#cb20-35" tabindex="-1"></a>      {{/setup}}</span>
<span id="cb20-36"><a href="#cb20-36" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">main</span><span class="dt">&gt;</span></span>
<span id="cb20-37"><a href="#cb20-37" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb20-38"><a href="#cb20-38" tabindex="-1"></a><span class="co">&lt;!-- </span><span class="re">END</span><span class="co">  : inst/pkgdown/templates/content-syllabus.html --&gt;</span></span></code></pre></div>
<p>These variables are in {sandpaper} and are <em>expected to
exist</em>. Because they are expected to exist, theese variables are
generated and stored in the internal environment
<code>these$translations</code> by the function
<code><a href="../reference/translations.html">establish_translation_vars()</a></code> when the package is loaded.
When the lesson is validated, these variables are translated to the
correct language with <code><a href="../reference/translations.html">set_language()</a></code> and placed in the
<code>instructor_globals</code> and <code>learner_globals</code>
storage. These variables are passed directly to {varnish} templates,
which eventually get processed by {whisker}:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span>
<span><span class="fu">whisker</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/whisker/man/whisker.render.html" class="external-link">whisker.render</a></span><span class="op">(</span><span class="st">"Edit this page: {{ translate.EditThisPage }}"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">snd</span><span class="op">$</span><span class="va">instructor_globals</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">## [1] "Edit this page: Edit this page"</span></span></code></pre></div>
<p>This is key to building lessons in other languages, regardless of
your default language. The lesson author sets the <code>lang:</code>
config key to the two-letter language code that the lesson is written
in. This gets passed to the <code><a href="../reference/translations.html">set_language()</a></code> function, which
modifies the translations inside the global data, but it does not modify
the language of the user session:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="fu">set_config</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>lang <span class="op">=</span> <span class="st">"es"</span><span class="op">)</span>, path <span class="op">=</span> <span class="va">lsn</span>, create <span class="op">=</span> <span class="cn">TRUE</span>, write <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Writing to <span style="color: #0000BB;">/tmp/RtmpmNiZak/file2be118914c61/config.yaml</span></span></span>
<span><span class="co">## → NA -&gt; lang: 'es'</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="fu">this_lesson</span><span class="op">(</span><span class="va">lsn</span><span class="op">)</span></span>
<span><span class="fu">whisker</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/whisker/man/whisker.render.html" class="external-link">whisker.render</a></span><span class="op">(</span><span class="st">"Edit this page: {{ translate.EditThisPage }}"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">snd</span><span class="op">$</span><span class="va">instructor_globals</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">## [1] "Edit this page: Mejora esta página"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"LANGUAGE"</span><span class="op">)</span></span>
<span><span class="co">## [1] "en"</span></span></code></pre></div>
<p>Switching the language is controlled entirely from within the lesson
config:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span><span class="op">$</span><span class="fu">set_config</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>lang <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span>, path <span class="op">=</span> <span class="va">lsn</span>, create <span class="op">=</span> <span class="cn">TRUE</span>, write <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Writing to <span style="color: #0000BB;">/tmp/RtmpmNiZak/file2be118914c61/config.yaml</span></span></span>
<span><span class="co">## → lang: 'es' -&gt; lang: 'en'</span></span>
<span><span class="va">snd</span><span class="op">$</span><span class="fu">this_lesson</span><span class="op">(</span><span class="va">lsn</span><span class="op">)</span></span>
<span><span class="fu">whisker</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/whisker/man/whisker.render.html" class="external-link">whisker.render</a></span><span class="op">(</span><span class="st">"Edit this page: {{ translate.EditThisPage }}"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">snd</span><span class="op">$</span><span class="va">instructor_globals</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">## [1] "Edit this page: Edit this page"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="translation-variables">Translation Variables<a class="anchor" aria-label="anchor" href="#translation-variables"></a>
</h3>
<p>There are 61 translations generated by <code><a href="../reference/translations.html">set_language()</a></code>
that correspond to the following variables in {varnish}:</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>variable</th>
<th>string</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>translate.SkipToMain</code></td>
<td><code>'Skip to main content'</code></td>
</tr>
<tr class="even">
<td><code>translate.iPreAlpha</code></td>
<td><code>'Pre-Alpha'</code></td>
</tr>
<tr class="odd">
<td><code>translate.PreAlphaNote</code></td>
<td><code>'This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.'</code></td>
</tr>
<tr class="even">
<td><code>translate.AlphaNote</code></td>
<td><code>'This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.'</code></td>
</tr>
<tr class="odd">
<td><code>translate.iAlpha</code></td>
<td><code>'Alpha'</code></td>
</tr>
<tr class="even">
<td><code>translate.BetaNote</code></td>
<td><code>'This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.'</code></td>
</tr>
<tr class="odd">
<td><code>translate.iBeta</code></td>
<td><code>'Beta'</code></td>
</tr>
<tr class="even">
<td><code>translate.PeerReview</code></td>
<td><code>'This lesson has passed peer review.'</code></td>
</tr>
<tr class="odd">
<td><code>translate.InstructorView</code></td>
<td><code>'Instructor View'</code></td>
</tr>
<tr class="even">
<td><code>translate.LearnerView</code></td>
<td><code>'Learner View'</code></td>
</tr>
<tr class="odd">
<td><code>translate.MainNavigation</code></td>
<td><code>'Main Navigation'</code></td>
</tr>
<tr class="even">
<td><code>translate.ToggleNavigation</code></td>
<td><code>'Toggle Navigation'</code></td>
</tr>
<tr class="odd">
<td><code>translate.Menu</code></td>
<td><code>'Menu'</code></td>
</tr>
<tr class="even">
<td><code>translate.SearchButton</code></td>
<td><code>'Search the All In One page'</code></td>
</tr>
<tr class="odd">
<td><code>translate.Setup</code></td>
<td><code>'Setup'</code></td>
</tr>
<tr class="even">
<td><code>translate.KeyPoints</code></td>
<td><code>'Key Points'</code></td>
</tr>
<tr class="odd">
<td><code>translate.InstructorNotes</code></td>
<td><code>'Instructor Notes'</code></td>
</tr>
<tr class="even">
<td><code>translate.Glossary</code></td>
<td><code>'Glossary'</code></td>
</tr>
<tr class="odd">
<td><code>translate.LearnerProfiles</code></td>
<td><code>'Learner Profiles'</code></td>
</tr>
<tr class="even">
<td><code>translate.More</code></td>
<td><code>'More'</code></td>
</tr>
<tr class="odd">
<td><code>translate.LessonProgress</code></td>
<td><code>'Lesson Progress'</code></td>
</tr>
<tr class="even">
<td><code>translate.CloseMenu</code></td>
<td><code>'close menu'</code></td>
</tr>
<tr class="odd">
<td><code>translate.EPISODES</code></td>
<td><code>'EPISODES'</code></td>
</tr>
<tr class="even">
<td><code>translate.Home</code></td>
<td><code>'Home'</code></td>
</tr>
<tr class="odd">
<td><code>translate.HomePageNav</code></td>
<td><code>'Home Page Navigation'</code></td>
</tr>
<tr class="even">
<td><code>translate.RESOURCES</code></td>
<td><code>'RESOURCES'</code></td>
</tr>
<tr class="odd">
<td><code>translate.ExtractAllImages</code></td>
<td><code>'Extract All Images'</code></td>
</tr>
<tr class="even">
<td><code>translate.AIO</code></td>
<td><code>'See all in one page'</code></td>
</tr>
<tr class="odd">
<td><code>translate.DownloadHandout</code></td>
<td><code>'Download Lesson Handout'</code></td>
</tr>
<tr class="even">
<td><code>translate.ExportSlides</code></td>
<td><code>'Export Chapter Slides'</code></td>
</tr>
<tr class="odd">
<td><code>translate.PreviousAndNext</code></td>
<td><code>'Previous and Next Chapter'</code></td>
</tr>
<tr class="even">
<td><code>translate.Previous</code></td>
<td><code>'Previous'</code></td>
</tr>
<tr class="odd">
<td><code>translate.EstimatedTime</code></td>
<td><code>'Estimated time: {icons$clock} {minutes} minutes'</code></td>
</tr>
<tr class="even">
<td><code>translate.Next</code></td>
<td><code>'Next'</code></td>
</tr>
<tr class="odd">
<td><code>translate.NextChapter</code></td>
<td><code>'Next Chapter'</code></td>
</tr>
<tr class="even">
<td><code>translate.LastUpdate</code></td>
<td><code>'Last updated on {updated}'</code></td>
</tr>
<tr class="odd">
<td><code>translate.EditThisPage</code></td>
<td><code>'Edit this page'</code></td>
</tr>
<tr class="even">
<td><code>translate.ExpandAllSolutions</code></td>
<td><code>'Expand All Solutions'</code></td>
</tr>
<tr class="odd">
<td><code>translate.SetupInstructions</code></td>
<td><code>'Setup Instructions'</code></td>
</tr>
<tr class="even">
<td><code>translate.DownloadFiles</code></td>
<td><code>'Download files required for the lesson'</code></td>
</tr>
<tr class="odd">
<td><code>translate.ActualScheduleNote</code></td>
<td><code>'The actual schedule may vary slightly depending on the topics and exercises chosen by the instructor.'</code></td>
</tr>
<tr class="even">
<td><code>translate.BackToTop</code></td>
<td><code>'Back To Top'</code></td>
</tr>
<tr class="odd">
<td><code>translate.SpanToTop</code></td>
<td><code>'&lt;(Back)&gt; To Top'</code></td>
</tr>
<tr class="even">
<td><code>translate.ThisLessonCoC</code></td>
<td><code>'This lesson is subject to the &lt;(Code of Conduct)&gt;'</code></td>
</tr>
<tr class="odd">
<td><code>translate.CoC</code></td>
<td><code>'Code of Conduct'</code></td>
</tr>
<tr class="even">
<td><code>translate.EditOnGH</code></td>
<td><code>'Edit on GitHub'</code></td>
</tr>
<tr class="odd">
<td><code>translate.Contributing</code></td>
<td><code>'Contributing'</code></td>
</tr>
<tr class="even">
<td><code>translate.Source</code></td>
<td><code>'Source'</code></td>
</tr>
<tr class="odd">
<td><code>translate.Cite</code></td>
<td><code>'Cite'</code></td>
</tr>
<tr class="even">
<td><code>translate.Contact</code></td>
<td><code>'Contact'</code></td>
</tr>
<tr class="odd">
<td><code>translate.About</code></td>
<td><code>'About'</code></td>
</tr>
<tr class="even">
<td><code>translate.MaterialsLicensedUnder</code></td>
<td><code>'Materials licensed under {license} by the authors'</code></td>
</tr>
<tr class="odd">
<td><code>translate.TemplateLicense</code></td>
<td><code>'Template licensed under &lt;(CC-BY 4.0)&gt; by {template_authors}'</code></td>
</tr>
<tr class="even">
<td><code>translate.Carpentries</code></td>
<td><code>'The Carpentries'</code></td>
</tr>
<tr class="odd">
<td><code>translate.BuiltWith</code></td>
<td><code>'Built with {sandpaper_link}, {pegboard_link}, and {varnish_link}'</code></td>
</tr>
<tr class="even">
<td><code>translate.ExpandAllSolutions</code></td>
<td><code>'Expand All Solutions'</code></td>
</tr>
<tr class="odd">
<td><code>translate.CollapseAllSolutions</code></td>
<td><code>'Collapse All Solutions'</code></td>
</tr>
<tr class="even">
<td><code>translate.Collapse</code></td>
<td><code>'Collapse'</code></td>
</tr>
<tr class="odd">
<td><code>translate.Episodes</code></td>
<td><code>'Episodes'</code></td>
</tr>
<tr class="even">
<td><code>translate.GiveFeedback</code></td>
<td><code>'Give Feedback'</code></td>
</tr>
<tr class="odd">
<td><code>translate.LearnMore</code></td>
<td><code>'Learn More'</code></td>
</tr>
</tbody>
</table>
<p>In addition, there are 26 translations that are inserted
<em>before</em> they get to {varnish}:</p>
<table class="table">
<thead><tr class="header">
<th>variable</th>
<th>string</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>OUTPUT</code></td>
<td><code>'OUTPUT'</code></td>
</tr>
<tr class="even">
<td><code>WARNING</code></td>
<td><code>'WARNING'</code></td>
</tr>
<tr class="odd">
<td><code>ERROR</code></td>
<td><code>'ERROR'</code></td>
</tr>
<tr class="even">
<td><code>Overview</code></td>
<td><code>'Overview'</code></td>
</tr>
<tr class="odd">
<td><code>Questions</code></td>
<td><code>'Questions'</code></td>
</tr>
<tr class="even">
<td><code>Objectives</code></td>
<td><code>'Objectives'</code></td>
</tr>
<tr class="odd">
<td><code>Callout</code></td>
<td><code>'Callout'</code></td>
</tr>
<tr class="even">
<td><code>Challenge</code></td>
<td><code>'Challenge'</code></td>
</tr>
<tr class="odd">
<td><code>Prereq</code></td>
<td><code>'Prerequisite'</code></td>
</tr>
<tr class="even">
<td><code>Checklist</code></td>
<td><code>'Checklist'</code></td>
</tr>
<tr class="odd">
<td><code>Discussion</code></td>
<td><code>'Discussion'</code></td>
</tr>
<tr class="even">
<td><code>Testimonial</code></td>
<td><code>'Testimonial'</code></td>
</tr>
<tr class="odd">
<td><code>Keypoints</code></td>
<td><code>'Key Points'</code></td>
</tr>
<tr class="even">
<td><code>Show me the solution</code></td>
<td><code>'Show me the solution'</code></td>
</tr>
<tr class="odd">
<td><code>Give me a hint</code></td>
<td><code>'Give me a hint'</code></td>
</tr>
<tr class="even">
<td><code>Show details</code></td>
<td><code>'Show details'</code></td>
</tr>
<tr class="odd">
<td><code>Instructor Note</code></td>
<td><code>'Instructor Note'</code></td>
</tr>
<tr class="even">
<td><code>SummaryAndSetup</code></td>
<td><code>'Summary and Setup'</code></td>
</tr>
<tr class="odd">
<td><code>SummaryAndSchedule</code></td>
<td><code>'Summary and Schedule'</code></td>
</tr>
<tr class="even">
<td><code>AllInOneView</code></td>
<td><code>'All in One View'</code></td>
</tr>
<tr class="odd">
<td><code>PageNotFound</code></td>
<td><code>'Page not found'</code></td>
</tr>
<tr class="even">
<td><code>AllImages</code></td>
<td><code>'All Images'</code></td>
</tr>
<tr class="odd">
<td><code>Anchor</code></td>
<td><code>'anchor'</code></td>
</tr>
<tr class="even">
<td><code>Figure</code></td>
<td><code>'Figure {element}'</code></td>
</tr>
<tr class="odd">
<td><code>ImageOf</code></td>
<td><code>'Image {i} of {n}: {sQuote(txt)}'</code></td>
</tr>
<tr class="even">
<td><code>Finish</code></td>
<td><code>'Finish'</code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="pkgdown-metadata">pkgdown metadata<a class="anchor" aria-label="anchor" href="#pkgdown-metadata"></a>
</h2>
<p>Another source of metadata is that created for the pkgdown in a file
called <code>site/_pkgdown.yaml</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------ information</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="co"># This file was generated by sandpaper version '0.16.4'</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="co"># If you want to make changes, please edit '/tmp/RtmpmNiZak/file2be118914c61/config.yaml'</span></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------ information</span></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> An Example Lesson</span></span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a><span class="fu">lang</span><span class="kw">:</span><span class="at"> en</span></span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a><span class="fu">home</span><span class="kw">:</span></span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a><span class="at">  </span><span class="fu">title</span><span class="kw">:</span><span class="at"> Home</span></span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a><span class="at">  </span><span class="fu">strip_header</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a><span class="at">  </span><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="ch">~</span></span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a><span class="fu">template</span><span class="kw">:</span></span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a><span class="at">  </span><span class="fu">package</span><span class="kw">:</span><span class="at"> varnish</span></span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a><span class="at">  </span><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a><span class="at">    </span><span class="fu">time</span><span class="kw">:</span><span class="at"> 2024-05-07 17:07:45 +0000</span></span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a><span class="at">    </span><span class="fu">source</span><span class="kw">:</span><span class="at"> https://github.com/carpentries/file2be118914c61</span></span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a><span class="at">    </span><span class="fu">branch</span><span class="kw">:</span><span class="at"> main</span></span>
<span id="cb24-18"><a href="#cb24-18" tabindex="-1"></a><span class="at">    </span><span class="fu">contact</span><span class="kw">:</span><span class="at"> team@carpentries.org</span></span>
<span id="cb24-19"><a href="#cb24-19" tabindex="-1"></a><span class="at">    </span><span class="fu">license</span><span class="kw">:</span><span class="at"> CC-BY 4.0</span></span>
<span id="cb24-20"><a href="#cb24-20" tabindex="-1"></a><span class="at">    </span><span class="fu">handout</span><span class="kw">:</span><span class="at"> </span><span class="ch">~</span></span>
<span id="cb24-21"><a href="#cb24-21" tabindex="-1"></a><span class="at">    </span><span class="fu">cp</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb24-22"><a href="#cb24-22" tabindex="-1"></a><span class="at">    </span><span class="fu">lc</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb24-23"><a href="#cb24-23" tabindex="-1"></a><span class="at">    </span><span class="fu">dc</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb24-24"><a href="#cb24-24" tabindex="-1"></a><span class="at">    </span><span class="fu">swc</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb24-25"><a href="#cb24-25" tabindex="-1"></a><span class="at">    </span><span class="fu">carpentry</span><span class="kw">:</span><span class="at"> incubator</span></span>
<span id="cb24-26"><a href="#cb24-26" tabindex="-1"></a><span class="at">    </span><span class="fu">carpentry_name</span><span class="kw">:</span><span class="at"> Carpentries Incubator</span></span>
<span id="cb24-27"><a href="#cb24-27" tabindex="-1"></a><span class="at">    </span><span class="fu">carpentry_icon</span><span class="kw">:</span><span class="at"> incubator</span></span>
<span id="cb24-28"><a href="#cb24-28" tabindex="-1"></a><span class="at">    </span><span class="fu">life_cycle</span><span class="kw">:</span><span class="at"> pre-alpha</span></span>
<span id="cb24-29"><a href="#cb24-29" tabindex="-1"></a><span class="at">    </span><span class="fu">pre_alpha</span><span class="kw">:</span><span class="at"> </span><span class="ch">yes</span></span>
<span id="cb24-30"><a href="#cb24-30" tabindex="-1"></a><span class="at">    </span><span class="fu">alpha</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb24-31"><a href="#cb24-31" tabindex="-1"></a><span class="at">    </span><span class="fu">beta</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb24-32"><a href="#cb24-32" tabindex="-1"></a><span class="at">    </span><span class="fu">stable</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb24-33"><a href="#cb24-33" tabindex="-1"></a><span class="at">    </span><span class="fu">doi</span><span class="kw">:</span><span class="at"> </span><span class="ch">~</span></span>
<span id="cb24-34"><a href="#cb24-34" tabindex="-1"></a><span class="at">    </span><span class="fu">title</span><span class="kw">:</span><span class="at"> An Example Lesson</span></span>
<span id="cb24-35"><a href="#cb24-35" tabindex="-1"></a><span class="at">    </span><span class="fu">created</span><span class="kw">:</span><span class="at"> </span><span class="st">'2024-05-07'</span></span>
<span id="cb24-36"><a href="#cb24-36" tabindex="-1"></a><span class="at">    </span><span class="fu">keywords</span><span class="kw">:</span><span class="at"> software, data, lesson, The Carpentries</span></span>
<span id="cb24-37"><a href="#cb24-37" tabindex="-1"></a><span class="at">    </span><span class="fu">episodes</span><span class="kw">:</span><span class="at"> </span><span class="ch">~</span></span>
<span id="cb24-38"><a href="#cb24-38" tabindex="-1"></a><span class="at">    </span><span class="fu">learners</span><span class="kw">:</span><span class="at"> </span><span class="ch">~</span></span>
<span id="cb24-39"><a href="#cb24-39" tabindex="-1"></a><span class="at">    </span><span class="fu">instructors</span><span class="kw">:</span><span class="at"> </span><span class="ch">~</span></span>
<span id="cb24-40"><a href="#cb24-40" tabindex="-1"></a><span class="at">    </span><span class="fu">profiles</span><span class="kw">:</span><span class="at"> </span><span class="ch">~</span></span></code></pre></div>
<p>This file is what allows {pkgdown} to recognise that a website needs
to be built. These variables are compiled into the <code>pkg</code>
variable that is passed to all downstream files from
<code><a href="../reference/build_site.html">build_site()</a></code>. The important elements we use are</p>
<ul>
<li>
<code>$lang</code> stores the language variable</li>
<li>
<code>$src_path</code> stores the source path of the lesson (the
<code>site/</code> directory, or the location of the
<code>SANDPAPER_SITE</code> environment variable).</li>
<li>
<code>$dst_path</code> stores the destination path to the lesson
(<code>site/docs</code>). <strong>NOTE:</strong> this particular path
<em>could</em> be changed in <code><a href="../reference/build_site.html">build_site()</a></code> so that we update
the name of the path so that it’s less confusing. The docs folder was a
mechanism for pkgdown to locally deploy the site without having to
affect the package structure (it was also a mechanism to serve GitHub
pages in the past).</li>
<li>
<code>$meta</code> a list of items passed on to {varnish}</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">snd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">asNamespace</a></span><span class="op">(</span><span class="st">"sandpaper"</span><span class="op">)</span></span>
<span><span class="va">pkg</span> <span class="op">&lt;-</span> <span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/as_pkgdown.html" class="external-link">as_pkgdown</a></span><span class="op">(</span><span class="va">snd</span><span class="op">$</span><span class="fu">path_site</span><span class="op">(</span><span class="va">lsn</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">pkg</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lang"</span>, <span class="st">"src_path"</span>, <span class="st">"dst_path"</span>, <span class="st">"meta"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">## $lang</span></span>
<span><span class="co">## [1] "en"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $src_path</span></span>
<span><span class="co">## <span style="color: #0000BB; font-weight: bold;">/tmp/RtmpmNiZak/file2be118914c61/site</span></span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $dst_path</span></span>
<span><span class="co">## /tmp/RtmpmNiZak/file2be118914c61/site/docs</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta</span></span>
<span><span class="co">## $meta$title</span></span>
<span><span class="co">## [1] "An Example Lesson"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$lang</span></span>
<span><span class="co">## [1] "en"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$home</span></span>
<span><span class="co">## $meta$home$title</span></span>
<span><span class="co">## [1] "Home"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$home$strip_header</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$home$description</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template</span></span>
<span><span class="co">## $meta$template$package</span></span>
<span><span class="co">## [1] "varnish"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params</span></span>
<span><span class="co">## $meta$template$params$time</span></span>
<span><span class="co">## [1] "2024-05-07 17:07:45 +0000"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$source</span></span>
<span><span class="co">## [1] "https://github.com/carpentries/file2be118914c61"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$branch</span></span>
<span><span class="co">## [1] "main"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$contact</span></span>
<span><span class="co">## [1] "team@carpentries.org"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$license</span></span>
<span><span class="co">## [1] "CC-BY 4.0"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$handout</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$cp</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$lc</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$dc</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$swc</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$carpentry</span></span>
<span><span class="co">## [1] "incubator"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$carpentry_name</span></span>
<span><span class="co">## [1] "Carpentries Incubator"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$carpentry_icon</span></span>
<span><span class="co">## [1] "incubator"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$life_cycle</span></span>
<span><span class="co">## [1] "pre-alpha"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$pre_alpha</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$alpha</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$beta</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$stable</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$doi</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$title</span></span>
<span><span class="co">## [1] "An Example Lesson"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$created</span></span>
<span><span class="co">## [1] "2024-05-07"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$keywords</span></span>
<span><span class="co">## [1] "software, data, lesson, The Carpentries"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$episodes</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$learners</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$instructors</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $meta$template$params$profiles</span></span>
<span><span class="co">## NULL</span></span></code></pre></div>
<p>Before being sent to be rendered, it goes through one more
transformation, which is where the variable contexts you find in
{varnish} come from. The contexts that we use are <code>site</code> for
the root path and title, <code>yaml</code> for lesson-wide content, and
<code>lang</code> to define the language. Everything else is not
used.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/render_page.html" class="external-link">data_template</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/as.yaml.html" class="external-link">as.yaml</a></span><span class="op">(</span><span class="va">dat</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lang"</span>, <span class="st">"site"</span>, <span class="st">"yaml"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## lang: en</span></span>
<span><span class="co">## site:</span></span>
<span><span class="co">##   root: ''</span></span>
<span><span class="co">##   title: An Example Lesson</span></span>
<span><span class="co">## yaml:</span></span>
<span><span class="co">##   time: 2024-05-07 17:07:45 +0000</span></span>
<span><span class="co">##   source: https://github.com/carpentries/file2be118914c61</span></span>
<span><span class="co">##   branch: main</span></span>
<span><span class="co">##   contact: team@carpentries.org</span></span>
<span><span class="co">##   license: CC-BY 4.0</span></span>
<span><span class="co">##   handout: ~</span></span>
<span><span class="co">##   cp: no</span></span>
<span><span class="co">##   lc: no</span></span>
<span><span class="co">##   dc: no</span></span>
<span><span class="co">##   swc: no</span></span>
<span><span class="co">##   carpentry: incubator</span></span>
<span><span class="co">##   carpentry_name: Carpentries Incubator</span></span>
<span><span class="co">##   carpentry_icon: incubator</span></span>
<span><span class="co">##   life_cycle: pre-alpha</span></span>
<span><span class="co">##   pre_alpha: yes</span></span>
<span><span class="co">##   alpha: no</span></span>
<span><span class="co">##   beta: no</span></span>
<span><span class="co">##   stable: no</span></span>
<span><span class="co">##   doi: ~</span></span>
<span><span class="co">##   title: An Example Lesson</span></span>
<span><span class="co">##   created: '2024-05-07'</span></span>
<span><span class="co">##   keywords: software, data, lesson, The Carpentries</span></span>
<span><span class="co">##   episodes: ~</span></span>
<span><span class="co">##   learners: ~</span></span>
<span><span class="co">##   instructors: ~</span></span>
<span><span class="co">##   profiles: ~</span></span>
<span><span class="co">##   .present: yes</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Zhian N. Kamvar, Joel H. Nitta.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
